(this["webpackJsonppunk-army-mint-app"]=this["webpackJsonppunk-army-mint-app"]||[]).push([[0],{1104:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(52),r=a.n(s),c=(a(396),a(397),a(398),a(399),a(400),a(130)),o=a(237);a(1126);const i=new c.a(["store_write","publish_data"]),d=new o.a({appConfig:i}),m={appDetails:{name:"Punk Army NFT",icon:window.location.origin+"/images/logo.png"},redirectTo:"/",onFinish:()=>{window.location.reload()},userSession:d};var u=a(6);let E=l.a.createContext(),g={logged:!1,theme:"dark",userData:{},isOwner:!1,mintEvent:{},mintAddresses:[],txs:[],subscriptions:null,openModal:!1,modalContent:{},cachedImgs:{}},f=(e,t)=>{switch(t.type){case"update":return{...e,...t.obj};case"logout":return g;case"add_transaction":if(t.tx&&t.tx.tx_id){return e.txs.find(e=>e.tx_id===t.tx.tx_id)?{...e,txs:e.txs.map(e=>e.tx_id===t.tx.tx_id?{...e,...t.tx}:e)}:{...e,txs:[...e.txs,t.tx]}}return{...e};case"open_modal":return{...e,openModal:!0,modalContent:{...t.rarity_obj,...t.punk}};case"close_modal":return{...e,openModal:!1,modalContent:{}};case"cache_image":return{...e,cachedImgs:{...e.cachedImgs,[t.url]:t.response}};case"update_transaction":e.txs.find(e=>e.tx_id===t.tx_id);if(t.tx_&&t.tx.tx_id){if(e.txs.find(e=>e.tx_id===t.tx.tx_id))return{...e,txs:e.txs.map(e=>e.tx_id===t.tx.tx_id?{...e,...t.tx}:e)}}return{...e};case"set_subscription":return{...e,subscriptions:t.subscriptions};case"change_theme":return{...e,theme:t.theme};default:return t.obj}};function v(e){let[t,a]=l.a.useReducer(f,g),n={UserState:t,UserDispatch:a};return l.a.createElement(E.Provider,{value:n},e.children)}E.Consumer;var p=a(1),_=a(22),h=a(1120),C=a(132),b=a(1127),N=a(33);let O=null,A="",y="";switch(window.network){case"testnet":O=new N.c,A="https://stacks-node-api.testnet.stacks.co",y="https://stacks-node-api.testnet.stacks.co/";break;case"mocknet":O={...new N.b},A="http://localhost:3999",y="http://localhost:3999/";break;case"mainnet":O=new N.a,A="https://stacks-node-api.mainnet.stacks.co",y="https://stacks-node-api.mainnet.stacks.co/";break;default:Error("Invalid network")}var S={SELECTED_NETWORK:network,SELECTED_NETWORK_CALLER:"mocknet"!=network?network:"testnet",CONTRACT_ADDRESS:window.CONTRACT_ADDRESS,CONTRACT_NAME:window.CONTRACT_NAME,NETWORK:O,COLLECTION_URL:window.COLLECTION_URL,STACKS_API_BASE_URL:A,STACKS_SOCKET_URL:y,TOKEN_STR:"PUNK_ARMY_NFT_TKN_STR",COLLECTIONS:window.COLLECTIONS,DAPPS:window.DAPPS,COLLECTIONS2:window.COLLECTIONS2},T=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"has_multiple_whitelist",network:S.NETWORK,functionArgs:[...e],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value.value)}catch(s){l&&l(s)}},k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"has_avaible_multiple_mint",network:S.NETWORK,functionArgs:[...e],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value.value)}catch(s){l&&l(s)}},R=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;console.log("calling is owner",t.userData.profile);try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"is_nft_contract_owner",network:S.NETWORK,functionArgs:[...e],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n("true"===Object(_.c)(l))}catch(s){console.log("error",s),l&&l(s)}},x=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"current_mint_event",network:S.NETWORK,functionArgs:[...e],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value)}catch(s){l&&l(s)}},L=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let n=await Object(b.a)({contractAddress:t.address,contractName:t.ctr_name,functionName:"whitelist_addresses",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},D=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let n=await Object(b.a)({contractAddress:t.address,contractName:t.ctr_name,functionName:"minting_resume",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token_id:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e.token_id)try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"get-punk",network:S.NETWORK,functionArgs:[Object(h.b)(e.token_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value.value)}catch(s){l&&l(s)}},j=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let n=await Object(b.a)({contractAddress:t.address,contractName:t.ctr_name,functionName:"get-avaible-tokens",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});console.log("TOKEN RESULT",n),a&&a(n.list)}catch(l){n&&n(l)}},I=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let n=await Object(b.a)({contractAddress:t.address,contractName:t.ctr_name,functionName:"get-packages-list",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});console.log("TOKEN RESULT",n),a&&a(Object(_.b)(n))}catch(l){n&&n(l)}},K=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ctx:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new Promise(async(l,s)=>{try{let n=await Object(b.a)({contractAddress:e.ctx.split(".")[0],contractName:e.ctx.split(".")[1],functionName:"get-decimals",network:S.NETWORK,functionArgs:[],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});console.log("TKN DECIMALS",Object(_.b)(n)),a&&a(Object(_.b)(n)),l(Object(_.b)(n))}catch(r){n&&n(r),s(r)}})},W=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ctx:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new Promise(async(l,s)=>{try{let n=await Object(b.a)({contractAddress:e.ctx.split(".")[0],contractName:e.ctx.split(".")[1],functionName:"get-balance",network:S.NETWORK,functionArgs:[Object(C.e)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER])],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});console.log("TKN DECIMALS",Object(_.b)(n)),a&&a(Object(_.b)(n)),l(Object(_.b)(n))}catch(r){n&&n(r),s(r)}})},U=a(3),M=a(10),z=a(1124),P=a(114),F=a(1125),B=a(1122),G={burn:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[];if(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]==a.address){const n=a.address,l=a.ctr_name,s=a.tkn,c=U.m.DoesNotOwn,o=Object(M.g)(n,l,s);r.push(Object(b.f)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],c,o,Object(h.b)(e.token_id)))}n({contractAddress:a.address,contractName:a.ctr_name,functionName:"burn-token",functionArgs:[Object(h.b)(e.token_id)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},postConditions:r,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},addAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{principal:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{n({contractAddress:a.address,contractName:a.ctr_name,functionName:"add_address_to_mint_event",functionArgs:[Object(C.e)(e.principal)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},addMultipleAddresses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{if(e.list.length>220)return alert("Invalid list length"),void(s&&s("Invalid list length"));let r=[];e.list.map(e=>r.push(Object(C.e)(e))),n({contractAddress:a.address,contractName:a.ctr_name,functionName:"add_multiple_addresses_to_mint_event",functionArgs:[Object(z.a)(r)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},removeAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{principal:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{n({contractAddress:a.address,contractName:a.ctr_name,functionName:"remove_address_to_mint_event",functionArgs:[Object(C.e)(e.principal)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},emptyAddresses:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{a({contractAddress:t.address,contractName:t.ctr_name,functionName:"empty_whitelist",functionArgs:[],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},chMetadata:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,metadata_url:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;console.log("calling ch metadata",t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]);try{n({contractAddress:a.address,contractName:a.ctr_name,functionName:"set_punk_metadata_url",functionArgs:[Object(h.b)(e.id),Object(P.a)(e.metadata_url)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},openMintEvent:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mint_price:0,public_value:0,address_mint:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=a.is_extended?[Object(h.b)(e.public_value),Object(h.b)(e.address_mint)]:[Object(h.b)(e.mint_price),Object(h.b)(e.public_value),Object(h.b)(e.address_mint)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"open_mint_event",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},editMintEvent:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mint_price:0,public_value:0,address_mint:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=a.is_extended?[Object(h.b)(e.public_value),Object(h.b)(e.address_mint)]:[Object(h.b)(e.mint_price),Object(h.b)(e.public_value),Object(h.b)(e.address_mint)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"edit_mint_event",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},closeMintEvent:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{a({contractAddress:t.address,contractName:t.ctr_name,functionName:"close_mint_event",functionArgs:[],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},mint:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;try{let c=e.token?"claim_punk_with_token":"claim_punk",o=[];if((t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]!=a.address||a.is_extended)&&n>0)if(e.token){const l=t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],s=U.j.LessEqual,r=parseInt(n),c=e.token.tokenContract.split(".")[0],i=e.token.tokenContract.split(".")[1],d=Object(M.g)(c,i,e.token.tokenName);o.push(Object(b.e)(l,s,r,d)),a.is_extended&&o.push(Object(b.b)(a.address,a.ctr_name,s,r,d))}else{a.address,a.ctr_name;const e=U.j.LessEqual,l=parseInt(n);o.push(Object(b.g)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],e,l)),a.is_extended&&o.push(Object(b.d)(a.address,a.ctr_name,e,l))}let i=[];e.token&&(i=[Object(C.a)(e.token.tokenContract.split(".")[0],e.token.tokenContract.split(".")[1])]),l({contractAddress:a.address,contractName:a.ctr_name,functionName:c,functionArgs:i,onFinish:e=>{s&&s(e)},onCancel:e=>{r&&r(e)},postConditions:o,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(c){r&&r(c)}},mintMultiple:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;try{let c=e.token?"claim_multiple_with_token":"claim_multiple",o=e.amount,i=[];if((t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]!=a.address||a.is_extended)&&n>0)if(e.token){const l=t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],s=U.j.LessEqual,r=parseInt(n*o),c=e.token.tokenContract.split(".")[0],d=e.token.tokenContract.split(".")[1],m=Object(M.g)(c,d,e.token.tokenName);i.push(Object(b.e)(l,s,r,m)),a.is_extended&&i.push(Object(b.b)(a.address,a.ctr_name,s,r,m))}else{const e=U.j.LessEqual,l=parseInt(n*o);i.push(Object(b.g)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],e,l)),a.is_extended&&i.push(Object(b.d)(a.address,a.ctr_name,e,l))}let d=[];for(let e=0;e<o;e++)d.push(Object(h.b)(e));let m=[];m=e.token?[Object(z.a)(d),Object(C.a)(e.token.tokenContract.split(".")[0],e.token.tokenContract.split(".")[1])]:[Object(z.a)(d)],l({contractAddress:a.address,contractName:a.ctr_name,functionName:c,functionArgs:m,onFinish:e=>{s&&s(e)},onCancel:e=>{r&&r(e)},postConditions:i,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(c){r&&r(c)}},addPunk:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=window.MAX_PUNK,c=0,o=e.list,i=[];o.map(e=>{c!=r&&(i.push(Object(F.a)({metadata_url:e.metadata_url?Object(P.a)(e.metadata_url):Object(P.a)(e.image)})),c++)}),n({contractAddress:a.address,contractName:a.ctr_name,functionName:"create-multiple-punk",functionArgs:[Object(z.a)(i)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},setTokenPrice:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tokenContract:null,amount:0,tokenName:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[Object(C.a)(e.tokenContract.split(".")[0],e.tokenContract.split(".")[1]),Object(h.b)(e.amount),Object(P.a)(e.tokenName)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"set-token-price",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},removeTokenPrice:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tokenContract:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[Object(C.a)(e.tokenContract.split(".")[0],e.tokenContract.split(".")[1])];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"remove-token-price",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},setStxPrice:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{amount:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[Object(h.b)(e.amount)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"set-stx-price",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},setLockStxAcquire:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lock:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[e.lock?Object(B.b)():Object(B.a)()];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"set-lock-stx-acquire",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},addPackage:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nftget:1,nftpaid:1,order:1,qty:1},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[Object(h.b)(e.nftpaid),Object(h.b)(e.nftget),Object(h.b)(e.qty),Object(h.b)(e.order)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"add-package",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},editPackage:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,nftget:1,nftpaid:1,order:1,qty:1},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[Object(h.b)(e.id),Object(h.b)(e.nftpaid),Object(h.b)(e.nftget),Object(h.b)(e.qty),Object(h.b)(e.order)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"edit-package",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},removePackage:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[Object(h.b)(e.id)];n({contractAddress:a.address,contractName:a.ctr_name,functionName:"remove-package",functionArgs:r,onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){console.log("error",r),s&&s(r)}},addCommissionCtx:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],amount:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{if(e.amount<1||e.amount>100)return void alert("Invalid percentage");let r=200,c=0,o=e.list,i=[];o.map(e=>{if(c==r)return;let t=e.split(".");t[1]?i.push(Object(C.a)(t[0],t[1])):i.push(Object(C.e)(t[0],t[1])),c++}),n({contractAddress:a.address,contractName:a.ctr_name,functionName:"add-address-to-commission",functionArgs:[Object(z.a)(i),Object(h.b)(e.amount)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},removeCommissionAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=e.address.split("."),c=null;c=r[1]?Object(C.a)(r[0],r[1]):Object(C.e)(r[0],r[1]),n({contractAddress:a.address,contractName:a.ctr_name,functionName:"remove-address-from-commission",functionArgs:[c],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},buyPackage:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,token:null,amount:1},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;try{let c=e.token?"buy_package_with_token":"buy_package",o=e.amount,i=[];for(let e=0;e<o;e++)i.push(Object(h.b)(e));let d=[],m=[];if((t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]!=a.address||a.is_extended)&&n>0)if(e.token){const l=t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],s=U.j.LessEqual,r=parseInt(n),c=e.token.tokenContract.split(".")[0],o=e.token.tokenContract.split(".")[1],u=Object(M.g)(c,o,e.token.tokenName);m.push(Object(b.e)(l,s,r,u)),a.is_extended&&m.push(Object(b.b)(a.address,a.ctr_name,s,r,u)),d=[Object(h.b)(e.id),Object(C.a)(e.token.tokenContract.split(".")[0],e.token.tokenContract.split(".")[1]),Object(z.a)(i)]}else{const l=U.j.LessEqual,s=parseInt(n);m.push(Object(b.g)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],l,s)),a.is_extended&&m.push(Object(b.d)(a.address,a.ctr_name,l,s)),d=[Object(h.b)(e.id),Object(z.a)(i)]}l({contractAddress:a.address,contractName:a.ctr_name,functionName:c,functionArgs:d,onFinish:e=>{s&&s(e)},onCancel:e=>{r&&r(e)},postConditions:m,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(c){r&&r(c)}}},H=a(39),Y=a(11);const q=e=>S.COLLECTIONS[e].is_extended;function X(e){const{UserState:t,UserDispatch:a}=l.a.useContext(E);let{collection:n}=Object(H.g)();Object(H.e)(),Object(H.h)();const[s,r]=l.a.useState(!1);return l.a.useEffect(()=>{console.log("changed collection",n),n&&(r(!1),S.COLLECTIONS[n]&&S.COLLECTIONS[n].enabled&&R([],t,S.COLLECTIONS[n],e=>{console.log("res",e),r(e)},e=>null))},[n]),t.logged&&n?l.a.createElement(p.x,{pills:!0},l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/mint")?"active":"",to:"/"+n+"/mint"},"MINT")),l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:"nft"==location.pathname?"active":"",to:"/"+n+"/nft"},"NFTS")),s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/whitelist")?"active":"",to:"/"+n+"/whitelist"},"Whitelist")):null,s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/event")?"active":"",to:"/"+n+"/event"},"Mint event")):null,q(n)&&s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/packages")?"active":"",to:"/"+n+"/packages"},"Packages")):null,q(n)&&s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/commission")?"active":"",to:"/"+n+"/commission"},"Commissions")):null,q(n)&&s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/tokens")?"active":"",to:"/"+n+"/tokens"},"Tokens and prices")):null,s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/add")?"active":"",to:"/"+n+"/add"},"Add nfts")):null,s?l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/meta")?"active":"",to:"/"+n+"/meta"},"CH meta")):null,l.a.createElement(p.y,null,l.a.createElement(Y.b,{className:Object(H.h)("/:collection/txs")?"active":"",to:"/"+n+"/txs"},"Transactions"))):null}var V=a(53),J={Ancestors:window.AncestorsGallery,Friends:window.FriendsGallery,Punks:window.PunksGallery,PunksUpgrade:window.PunksUpgradeGallery},Z=a(87),Q=a(234);var $=e=>{const[t,a]=l.a.useState(!1),{doOpenAuth:n}=Object(u.useConnect)();return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(p.a,{color:"primary",className:"main-btn",size:"lg",onClick:()=>{a(!0),n(),a(!1)}},t?l.a.createElement(p.C,null):l.a.createElement("b",null,"Connect your Wallet ")))};const ee=e=>{try{return J[S.COLLECTIONS[e].full_gallery_name].length>0}catch(t){return!1}},te=e=>{try{return S.COLLECTIONS[e].has_rarity}catch(t){return!1}};function ae(e){const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1);let{collection:r}=Object(H.g)();const c=Object(H.e)();let o=Object(H.f)();l.a.useEffect(()=>{if(console.log("changed collection",r),r){let e=r?"/"+r+"/gallery":"/";if((!S.COLLECTIONS[r]||!S.COLLECTIONS[r].enabled)&&"/"!==o.pathname&&o.pathname!=e)return void c.push("/")}},[r]);return l.a.createElement(p.l,null,l.a.createElement(p.B,{style:{overflow:"visible"}},t.logged?l.a.createElement(p.m,{toggle:()=>s(!n),isOpen:n,style:{overflow:"visible",height:"auto"}},l.a.createElement(p.p,{caret:!0,tag:"span"},t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]),l.a.createElement(p.o,{end:!0,className:"menu_child"},l.a.createElement(p.n,{onClick:()=>(d.signUserOut(),a({type:"logout"}),void c.push("/"))},"Sign Out"))):null),l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:r?5:12,md:12},l.a.createElement("div",{className:r?"text-right":"text-center"},l.a.createElement("h1",{className:"title",style:{textAlign:r?"right":"center"}},"Punks Army",l.a.createElement("br",null),"NFTs Club"),l.a.createElement("a",{className:"social_url",href:window.TWITTER_URL,target:"_blank"},l.a.createElement(V.d,null)),l.a.createElement("a",{className:"social_url",href:window.DISCORD_URL,target:"_blank"},l.a.createElement(V.b,null)),l.a.createElement("a",{className:"social_url",href:window.MEDIUM_URL,target:"_blank"},l.a.createElement(V.c,null)))),r?l.a.createElement(p.k,{lg:7,md:12},l.a.createElement("h3",{className:"subtitle",style:{marginTop:28,marginBottom:-30}},"Current collection"),l.a.createElement(p.B,{style:{padding:"40px 20px 0",overflow:"visible"}},Object.keys(S.COLLECTIONS).filter(e=>e===r).map((e,t,a)=>{let n=S.COLLECTIONS[e],s="collection_info";return n.enabled||(s+=" disabled"),r&&r==e&&(s+=" current"),r&&n.enabled&&r!=e&&(s+=" not_current"),l.a.createElement(l.a.Fragment,{key:"collection_"+t},l.a.createElement(p.k,{md:6,sm:6,xs:12},l.a.createElement("div",{className:s,onClick:()=>{n.enabled&&r!=e&&c.push("/"+e+"/mint")}},l.a.createElement("div",{className:"img_container"},l.a.createElement("img",{src:"images/"+n.main_image})),l.a.createElement("div",{className:"logo_image_container"},l.a.createElement("img",{src:"images/"+n.logo_image})),l.a.createElement("h3",null,n.name),l.a.createElement("p",null,n.description))),l.a.createElement(p.k,{md:6,sm:6,xs:12},ee(e)?l.a.createElement(p.a,{id:"open_full_gallery",color:"default",style:{color:"#fff",display:"block"},className:"mb-3",size:"xs",onClick:async()=>c.push("/"+e+"/gallery")},"GALLERY"):null,te(e)?l.a.createElement(p.a,{id:"open_full_gallery",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>c.push("/"+e+"/rarity")},"RARITY CHECK"):null,l.a.createElement(p.a,{id:"open_full_gallery",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>c.push("/")},"CHOOSE ANOTHER COLLECTION")))}))):null),r?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{style:{color:"#fff",fontSize:44,textAlign:"center",fontWeight:"bold",marginTop:50,marginBottom:40}},"Upgrade NFTs Public Mint is live!"),t.logged?l.a.createElement("h1",{className:"call_to_action_choose_collection",style:{padding:20}},l.a.createElement(Z.a,{animation:{y:-5,yoyo:!0,repeat:-1,duration:500},paused:!1,className:"code-box-shape"},"Start date: Friday 6 May at 9:00 AM GMT ",l.a.createElement("br",null),l.a.createElement(V.a,null))):l.a.createElement($,null),l.a.createElement(p.B,null,Object.keys(S.COLLECTIONS2).map((e,t,a)=>{let n=S.COLLECTIONS2[e],s="collection_info";return n.enabled||(s+=" disabled"),r&&r==e&&(s+=" current"),r&&n.enabled&&r!=e&&(s+=" not_current"),l.a.createElement(p.k,{md:4,sm:12,className:"offset-lg-4",style:{overflow:"visible"},key:"collection_"+t},l.a.createElement("div",{className:s,onClick:()=>{n.enabled&&r!=e&&c.push("/"+e+"/mint")}},l.a.createElement("div",{className:"img_container"},l.a.createElement("img",{src:"images/"+n.main_image})),l.a.createElement("div",{className:"logo_image_container"},l.a.createElement("img",{src:"images/"+n.logo_image})),l.a.createElement("h3",null,n.name),l.a.createElement("p",null,n.description)),ee(e)?l.a.createElement(p.a,{id:"open_full_gallery",color:"primary",style:{color:"#fff",margin:"-24px auto",display:"block"},className:"mb-3",size:"xs",onClick:async()=>c.push("/"+e+"/gallery")},"GALLERY"):null,te(e)?l.a.createElement(p.a,{id:"open_full_gallery",color:"primary",style:{color:"#fff",margin:"-24px auto",display:"block",marginTop:12},className:"mb-3",size:"xs",onClick:async()=>c.push("/"+e+"/rarity")},"RARITY CHECK"):null)})),t.logged?l.a.createElement("h3",{className:"call_to_action_choose_collection",style:{padding:20}},l.a.createElement(Z.a,{animation:{y:-5,yoyo:!0,repeat:-1,duration:500},paused:!1,className:"code-box-shape"},"Choose a DApp"),l.a.createElement(Z.a,{animation:{y:-5,yoyo:!0,repeat:-1,duration:500},paused:!1,className:"code-box-shape"},l.a.createElement(V.a,null))):l.a.createElement($,null),l.a.createElement(p.B,null,Object.keys(S.DAPPS).map((e,t,a)=>{let n=S.DAPPS[e],s="collection_info";return n.enabled||(s+=" disabled"),l.a.createElement(p.k,{md:4,sm:12,style:{overflow:"visible"},key:"dapps_"+t},l.a.createElement("div",{className:s,onClick:()=>{n.enabled&&c.push("/"+S.DAPPS[e].url)}},l.a.createElement("div",{className:"img_container"},l.a.createElement("img",{src:"images/"+n.main_image})),l.a.createElement("h3",null,n.name),l.a.createElement("p",null,n.description)))})),l.a.createElement("h3",{className:"call_to_action_choose_collection",style:{padding:20}},l.a.createElement(Z.a,{animation:{y:-5,yoyo:!0,repeat:-1,duration:500},paused:!1,className:"code-box-shape"},"Choose a collection"),l.a.createElement(Z.a,{animation:{y:-5,yoyo:!0,repeat:-1,duration:500},paused:!1,className:"code-box-shape"},l.a.createElement(V.a,null))),l.a.createElement(p.B,null,Object.keys(S.COLLECTIONS).map((e,t,a)=>{let n=S.COLLECTIONS[e],s="collection_info";return n.enabled||(s+=" disabled"),r&&r==e&&(s+=" current"),r&&n.enabled&&r!=e&&(s+=" not_current"),l.a.createElement(p.k,{md:3,sm:12,style:{overflow:"visible"},key:"collection_"+t},l.a.createElement("div",{className:s,onClick:()=>{n.enabled&&r!=e&&c.push("/"+e+"/mint")}},l.a.createElement("div",{className:"img_container"},l.a.createElement("img",{src:"images/"+n.main_image})),l.a.createElement("div",{className:"logo_image_container"},l.a.createElement("img",{src:"images/"+n.logo_image})),l.a.createElement("h3",null,n.name),l.a.createElement("p",null,n.description)),ee(e)?l.a.createElement(p.a,{id:"open_full_gallery",color:"primary",style:{color:"#fff",margin:"-24px auto",display:"block"},className:"mb-3",size:"xs",onClick:async()=>c.push("/"+e+"/gallery")},"GALLERY"):null,te(e)?l.a.createElement(p.a,{id:"open_full_gallery",color:"primary",style:{color:"#fff",margin:"-24px auto",display:"block",marginTop:12},className:"mb-3",size:"xs",onClick:async()=>c.push("/"+e+"/rarity")},"RARITY CHECK"):null)}))),e.hide_nav?null:l.a.createElement(X,null))}function ne(e){const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1);let{collection:r}=Object(H.g)();const c=Object(H.e)();let o=Object(H.f)();l.a.useEffect(()=>{if(console.log("changed collection",r),r){let e=r?"/"+r+"/gallery":"/";if((!S.COLLECTIONS[r]||!S.COLLECTIONS[r].enabled)&&"/"!==o.pathname&&o.pathname!=e)return void c.push("/")}},[r]);return l.a.createElement(p.l,null,l.a.createElement(p.B,{style:{overflow:"visible"}},t.logged?l.a.createElement(p.m,{toggle:()=>s(!n),isOpen:n,style:{overflow:"visible",height:"auto"}},l.a.createElement(p.p,{caret:!0,tag:"span"},t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]),l.a.createElement(p.o,{end:!0,className:"menu_child"},l.a.createElement(p.n,{onClick:()=>(d.signUserOut(),a({type:"logout"}),void c.push("/"))},"Sign Out"))):null),l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("div",{className:"text-center"},l.a.createElement("h1",{className:"title",style:{textAlign:r?"right":"center"}},"Punks Army",l.a.createElement("br",null),"NFTs Club"),l.a.createElement("a",{className:"social_url",href:window.TWITTER_URL,target:"_blank"},l.a.createElement(V.d,null)),l.a.createElement("a",{className:"social_url",href:window.DISCORD_URL,target:"_blank"},l.a.createElement(V.b,null)),l.a.createElement("a",{className:"social_url",href:window.MEDIUM_URL,target:"_blank"},l.a.createElement(V.c,null))))))}function le(e){return l.a.createElement("div",{className:"footer"},l.a.createElement(p.l,null,l.a.createElement("a",{href:window.MAIN_URL},window.MAIN_URL_TEXT)))}function se(e,t){var a,n;return n=a=class extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,e.hasHeader?l.a.createElement(ae,Object.assign({},this.props,e)):null,e.hasSecondaryHeader?l.a.createElement(ne,Object.assign({},this.props,e)):null,l.a.createElement(p.l,null,l.a.createElement(t,this.props)),l.a.createElement(le,null))}},a.contextType=E,n}var re=a(19);var ce=se({route:"Whitelist",hasHeader:!0},(function(e){const{doContractCall:t}=Object(u.useConnect)(),{UserState:a,UserDispatch:n}=l.a.useContext(E),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(""),[m,g]=l.a.useState(""),[f,v]=l.a.useState(!1),[_,h]=l.a.useState(!1),[C,b]=l.a.useState(!1),[N,O]=l.a.useState(!1),[A,y]=l.a.useState([]);let{collection:k}=Object(H.g)();const R=Object(H.f)(),[x,D]=l.a.useState([]),w=()=>((e,t,a,n,l)=>{const s=["empty_whitelist","add_multiple_addresses_to_mint_event","add_address_to_mint_event","remove_address_to_mint_event","has_multiple_whitelist"];let r=n.map(e=>e.tx_id);console.log("ids",r),fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[],c=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==s.indexOf(e.contract_call.function_name)&&(n.push(e),console.log("metto transazione",e),c[e.tx_id]=!0)}),console.log("imposto nuove txs",n),a(n);let o=!0;await r.map(e=>{c[e]||(o=!1)}),console.log("is the same",o),o||l()},e=>{})})(a.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[k].address+"."+S.COLLECTIONS[k].ctr_name,D,x,j),j=()=>{N||(O(!0),L([],a,S.COLLECTIONS[k],e=>{console.log("addresses",e),y(e),b(!0),O(!1)},e=>{console.log("errore",e),b(!0),O(!1)}))};return l.a.useEffect(()=>{if(!C){b(!0),j(),N||(O(!0),T([],a,S.COLLECTIONS[k],e=>{console.log("can_add_multiple",e),r(e)},e=>{console.log("errore can_add_multiple",e),r(!1)})),w();let e=setInterval(()=>w(),5e3);return()=>clearInterval(e)}},[k,R]),l.a.createElement("div",null,x.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},x.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.B,null,l.a.createElement(p.k,{md:12,lg:6},l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Add ",l.a.createElement("b",null,"single")," address to whitelist for mint events"),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:i,id:"add_address",onChange:e=>d(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"STX Address")),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",block:!0,onClick:async()=>{f||""==i.length||(v(!0),G.addAddress({principal:i},a,S.COLLECTIONS[k],t,e=>{v(!1),d(""),w()},e=>{v(!1)}))}},f?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM"))),s?l.a.createElement("div",{className:"w_box",style:{marginTop:36}},l.a.createElement("p",null,"Add ",l.a.createElement("b",null,"multiple")," addresses to whitelist for mint events"),l.a.createElement(re.a,{value:c,language:"js",placeholder:'Please enter a json list of principals (es. \n\t[\n\t\t"ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM",\n\t\t"ST1SJ3DTE5DN7X54YDH5D64R3BCB6A2AG2ZQ8YPD5"\n\t]\n)',onChange:e=>o(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{id:"confirm_add_multiple",color:"primary",style:{color:"#fff",marginTop:12},className:"mb-3",size:"lg",block:!0,onClick:async()=>{let e=[];try{e=JSON.parse(c)}catch(n){return void alert("Invalid addresses list")}f||0==e.length||(v(!0),G.addMultipleAddresses({list:e},a,S.COLLECTIONS[k],t,e=>{v(!1),o(""),w()},e=>{v(!1)}))}},f?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM"))):null),l.a.createElement(p.k,{md:12,lg:6},l.a.createElement("h3",{className:"subtitle"},"Addresses"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>j()},N?l.a.createElement(p.C,{size:"sm"}):"Refresh"),s?l.a.createElement(p.a,{id:"remove_all",color:"danger",style:{color:"#fff",marginLeft:12},className:"mb-3",size:"xs",onClick:async()=>{G.emptyAddresses({},a,S.COLLECTIONS[k],t,e=>{h(!1),o(""),w()},e=>{h(!1)})}},_?l.a.createElement(p.C,{size:"sm"}):"Remove all"):null,l.a.createElement(p.t,{type:"unstyled",className:"addresses_list"},A.map((e,n,s)=>l.a.createElement("li",{key:"list_a_"+n,style:{color:"#a5a3a3"}},l.a.createElement(p.a,{disabled:_,close:!0,onClick:()=>{_||(h(!0),G.removeAddress({principal:e.value},a,S.COLLECTIONS[k],t,e=>{h(!1),w()},e=>{h(!1)}))}}),l.a.createElement("span",null,e.value)))))))})),oe=(a(128),a(62));function ie(e){return l.a.createElement("svg",{style:{width:e.dim||40,height:e.dim||40,...e.style,fill:"none",display:"inline"},viewBox:"0 0 22 22"},l.a.createElement("path",{d:"M4.18817 0.940674L9.37024 8.99389M9.37024 8.99389H0.266602M9.37024 8.99389H12.7316",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"bevel"}),l.a.createElement("path",{d:"M17.9129 0.940674L12.7308 8.99389H21.8345",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"bevel"}),l.a.createElement("path",{d:"M4.18817 21.4407L9.37024 13.3875M9.37024 13.3875H0.266602M9.37024 13.3875H12.7316",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"bevel"}),l.a.createElement("path",{d:"M17.9129 21.4407L12.7308 13.3875H21.8345",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"bevel"}))}var de={format_stx_integers:e=>String(parseFloat(e/1e6).toFixed(2)),format_stx_integers2:e=>{let t=e/1e6,a=t%1==0?0:2;return String(parseFloat(t).toFixed(a))},format_stx_integers2_with_pow:(e,t)=>{let a=Math.pow(10,parseInt(t));console.log("formatto",e,t);let n=parseInt(e)/a,l=n%1==0?0:2;return String(parseFloat(n).toFixed(l))},ipfs_gateway:e=>window.GATEWAY?e&&e.match(/ipfs:\/\//)&&window.GATEWAY?e.replace(/ipfs:\/\//,window.GATEWAY):e&&e.match(/https:\/\/gateway.pinata.cloud\/ipfs\//)&&window.GATEWAY?e.replace(/https:\/\/gateway.pinata.cloud\/ipfs\//,window.GATEWAY):e:e,video_mime_type:["video/mp4","video/ogg"],getIpfsUrl:async e=>{}};var me=se({route:"MintEvent",hasHeader:!0},(function(e){var t;const[a,n]=l.a.useState(!1),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(null),{doContractCall:i}=Object(u.useConnect)(),{UserState:d,UserDispatch:m}=l.a.useContext(E),[g,f]=l.a.useState(!1),[v,_]=l.a.useState(0),[h,C]=l.a.useState(0),[b,N]=l.a.useState(0),[O,A]=l.a.useState(!1),[y,T]=l.a.useState(!1);let{collection:k}=Object(H.g)();const R=Object(H.f)(),[L,D]=l.a.useState([]),w=()=>((e,t,a,n)=>{const l=["open_mint_event","close_mint_event","edit_mint_event"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[k].address+"."+S.COLLECTIONS[k].ctr_name,D),j=()=>{s||(r(!0),x([],d,S.COLLECTIONS[k],e=>{console.log("-------------EVENT------------",e),a||n(!0),console.log("current",e),o(e),f(e.is_open.value),console.log("open"),_(parseFloat(e.mint_price.value/1e6).toFixed(2)),console.log("stx"),C(parseInt(e.public_value.value)),console.log("private"),N(parseInt(e.address_mint.value)),console.log("addrm"),r(!1)},e=>{a||n(!0),f(!1),r(!1)}))};return l.a.useEffect(()=>{j(),w();let e=setInterval(()=>w(),5e3);return()=>clearInterval(e)},[k,R]),a?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},L.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},L.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>j()},s?l.a.createElement(p.C,{size:"sm"}):"Refresh"),c&&c.is_open.value?l.a.createElement("div",{className:"bg_black_el"},l.a.createElement("h3",null,"#",null===(t=c.id)||void 0===t?void 0:t.value),l.a.createElement("p",null,S.COLLECTIONS[k].is_extended?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{fontSize:46}},l.a.createElement(ie,{dim:40,style:{marginRight:6}}),l.a.createElement("b",null,"STX:"),l.a.createElement("span",{className:"currency"},de.format_stx_integers(c.mint_price.value))),l.a.createElement("br",null)),l.a.createElement("b",null,"Public:")," ",0===parseInt(c.public_value.value)?"NO":"YES",l.a.createElement("br",null),l.a.createElement("b",null,"Max per address:")," ",parseInt(c.address_mint.value)),l.a.createElement(p.a,{color:"danger",style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{y||(T(!0),G.closeMintEvent({},d,S.COLLECTIONS[k],i,e=>{T(!1),w()},e=>{T(!1)}))}},y?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CLOSE EVENT"))):null,l.a.createElement("div",{style:{height:24,width:"100%"}}),l.a.createElement("h3",{className:"subtitle"},c&&c.is_open.value?"Edit mint event":"Open mint event"),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Fill in the form and confirm"),S.COLLECTIONS[k].is_extended?null:l.a.createElement(p.q,{floating:!0},l.a.createElement(oe.a,{decimalSeparator:".",groupSeparator:",",className:"form-control",id:"fee",value:v,onValueChange:(e,t)=>{_(e)}}),l.a.createElement(p.s,{for:"fee"},"STX Fee")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{type:"select",value:h,id:"import",onChange:e=>C(e.target.value)},l.a.createElement("option",{value:"1"},"Public"),l.a.createElement("option",{value:"0"},"Private")),l.a.createElement(p.s,{for:"import"},"Public/Private")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:b,type:"number",id:"max_mint",onChange:e=>N(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"MAX mint per address")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{let e=0;if(!S.COLLECTIONS[k].is_extended){let t="",a=(v||"0").split(".");if(console.log("splitted",a),t+=String(a[0]),a[1]){let e=String(a[1]);1==e.length&&(e+="0"),t+=e}else t+="00";e=parseInt(1e4*t)}if(O)return;A(!0);let t="openMintEvent";c&&c.is_open.value&&(t="editMintEvent"),G[t]({mint_price:e,public_value:h,address_mint:b},d,S.COLLECTIONS[k],i,e=>{A(!1),w()},e=>{A(!1)})}},O?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm")))))):l.a.createElement(p.C,{color:"primary"})}));var ue=se({route:"AddPunks",hasHeader:!0},(function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(""),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0);let{collection:_}=Object(H.g)();const h=Object(H.f)(),[C,b]=l.a.useState([]),N=(e,t,a)=>{let n=e+t,l=a.slice(e,n);l.length>0?G.addPunk({list:l},c,S.COLLECTIONS[_],r,e=>{v(n),a.length>n-1?setTimeout(()=>N(n,t,a),500):d(!1),O()},e=>{d(!1),O()}):d(!1)},O=()=>((e,t,a,n)=>{const l=["create-multiple-punk"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[_].address+"."+S.COLLECTIONS[_].ctr_name,b);return l.a.useEffect(()=>{if(!t){a(!0),O();let e=setInterval(()=>O(),5e3);return()=>clearInterval(e)}},[_,h]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},C.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},C.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement("h3",{className:"subtitle"},"Add nft to collection"),l.a.createElement("p",{style:{color:"#fff"}},"Copy and paste a json array in the editor and then call the function"),i?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Process: ",f,"/",m)):l.a.createElement(re.a,{value:n,language:"js",placeholder:'Please enter a json list of metadata_url (es. \n\t[\n\t\t{"metadata_url":"ipfs://QmXm6d2hYVFWSZZiLLhbDKcWRpkGfwoTYMiaotScpXPYDk/0"},\n\t\t{"metadata_url":"ipfs://QmXm6d2hYVFWSZZiLLhbDKcWRpkGfwoTYMiaotScpXPYDk/1"},\n\t\t{"metadata_url":"ipfs://QmXm6d2hYVFWSZZiLLhbDKcWRpkGfwoTYMiaotScpXPYDk/2"},\n\t\t{"metadata_url":"ipfs://QmXm6d2hYVFWSZZiLLhbDKcWRpkGfwoTYMiaotScpXPYDk/3"}\n\t]\n)\n\t\t\t      \t',onChange:e=>s(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(i)return;let e=JSON.parse(n);g(e.length),d(!0),N(0,window.MAX_PUNK,e)}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD LIST")))))}));let Ee=l.a.createContext(),ge={cachedImgs:{}},fe=(e,t)=>{switch(t.type){case"cache_image":return{...e,cachedImgs:{...e.cachedImgs,[t.url]:t.response}};default:return t.obj}};function ve(e){let[t,a]=l.a.useReducer(fe,ge),n={CacheState:t,CacheDispatch:a};return l.a.createElement(Ee.Provider,{value:n},e.children)}Ee.Consumer;const pe=(e,t)=>{if(window.rarity&&Array.isArray(window.rarity)){let a=window.rarity.find(t=>t.image===e);a&&t(a)}};function _e(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(null),[r,c]=l.a.useState({}),[o,i]=l.a.useState(null),[d,m]=l.a.useState(null),{UserState:u,UserDispatch:g}=l.a.useContext(E),{CacheState:f,CacheDispatch:v}=l.a.useContext(Ee),[p,_]=l.a.useState(null);return l.a.useEffect(()=>{!t&&e.metadata_url&&(a(!0),(async(e,t,a,n,l,s,r,c)=>{let o=localStorage.getItem(e);if(o){let e=JSON.parse(o);e.image&&(t(e.image),n(e.image_type||"image"),pe(e.image,c)),a(e)}else{let l=await de.ipfs_gateway(e);console.log("-------------------------------------------ipfs url",l),fetch(l).then(e=>e.json()).then(l=>{l.image&&(t(l.image),n(l.image_type||"image"),pe(l.image,c)),localStorage.setItem(e,JSON.stringify(l)),a(l)},t=>{console.log("e ipfs url "+e,t)})}})(e.metadata_url,s,c,i,0,0,0,_))}),t&&n?l.a.createElement("div",{className:"collection_info no_shadow nft_container",onClick:()=>{g({type:"open_modal",punk:r,rarity_obj:p})}},l.a.createElement("div",{className:"img_container"},-1!==de.video_mime_type.indexOf(o)?l.a.createElement("video",{className:"video",autoPlay:!0,loop:!0,muted:!0},l.a.createElement("source",{src:de.ipfs_gateway(n),type:"video/mp4"})):l.a.createElement("img",{src:de.ipfs_gateway(n)})),e.collection?l.a.createElement("div",{className:"logo_image_container"},l.a.createElement("img",{src:"images/"+e.collection.logo_image})):null,l.a.createElement("h3",null,r.name),l.a.createElement("p",null,r.description),p&&p.Rank?l.a.createElement("p",{style:{overflow:"auto",whiteSpace:"inherit"}},l.a.createElement("b",null,"Rank:")," ",l.a.createElement("span",{className:"highlight"},p.Rank)):null,p&&p["Rank Points Bonus"]?l.a.createElement("p",{style:{overflow:"auto",whiteSpace:"inherit"}},l.a.createElement("b",null,"Rank Points Bonus:")," ",l.a.createElement("span",{className:"highlight"},p["Rank Points Bonus"])):null,p&&p["rarity point"]&&p.rank?l.a.createElement("div",{className:"ranking_container row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("b",null,"Rarity:")," ",l.a.createElement("span",{className:"highlight"},p["rarity point"])),l.a.createElement("div",{className:"col-6"},l.a.createElement("b",null,"Rank:")," ",l.a.createElement("span",{className:"highlight"},p.rank))):null):null}function he(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(null),{UserState:r,UserDispatch:c}=l.a.useContext(E);return l.a.useEffect(()=>{!t&&e.id&&w({token_id:e.id},r,S.COLLECTIONS[e.collection],t=>{var n,l;console.log("response get punk ID: "+e.id,t),s((null===(n=t.value)||void 0===n||null===(l=n.metadata_url)||void 0===l?void 0:l.value)||null),a(!0)},e=>null)}),t&&n?l.a.createElement(_e,{metadata_url:n,collection:S.COLLECTIONS[e.collection]}):null}a(952);const Ce=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;try{if(S.COLLECTIONS[e].is_extended){if("STACKS"==l)return de.format_stx_integers2((parseInt(t["stx-price"].value)||0)*s)+" STX";{let e=a.find(e=>e.tokenContract===l);return e?de.format_stx_integers2_with_pow(parseInt(e.amount||0)*s,n[e.tokenContract]||0)+" "+e.tokenName:0}}var r,c,o;return de.format_stx_integers2(parseInt((null===(r=t.mint_event)||void 0===r||null===(c=r.value)||void 0===c||null===(o=c.mint_price)||void 0===o?void 0:o.value)||0)*s)+" STX"}catch(i){return"-"}},be=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;try{if(S.COLLECTIONS[e].is_extended){if("STACKS"==n)return(parseInt(t["stx-price"].value)||0)*l;{let e=a.find(e=>e.tokenContract===n);return e?parseInt(e.amount||0)*l:0}}var s,r,c;return parseInt((null===(s=t.mint_event)||void 0===s||null===(r=s.value)||void 0===r||null===(c=r.mint_price)||void 0===c?void 0:c.value)||0)*l}catch(o){return console.log("e",o),"-"}},Ne=e=>{var t,a,n;return(null===(t=e.mint_event)||void 0===t||null===(a=t.value)||void 0===a||null===(n=a.is_open)||void 0===n?void 0:n.value)||!1},Oe=e=>{var t,a,n,l;return parseInt((null===(t=e.balance)||void 0===t?void 0:t.value)||0)>parseInt((null===(a=e.mint_event)||void 0===a||null===(n=a.value)||void 0===n||null===(l=n.mint_price)||void 0===l?void 0:l.value)||0)||!1},Ae=e=>{var t;return(null===(t=e.can_mint_address)||void 0===t?void 0:t.value)||!1},ye=e=>{var t,a;return parseInt(null===(t=e.last_nft_id)||void 0===t?void 0:t.value)<parseInt(null===(a=e.last_punk_id)||void 0===a?void 0:a.value)||!1},Se=e=>Oe(e)&&Ae(e)&&Ne(e)||!1,Te=e=>{var t;return(null===(t=S.COLLECTIONS[e])||void 0===t?void 0:t.gallery)||[]},ke=e=>e>1e3?1e3:e;var Re=se({route:"Mint",hasHeader:!0},(function(e){var t;const a=Object(H.e)(),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),[o,i]=l.a.useState(!1),[d,m]=l.a.useState({}),{doContractCall:g}=Object(u.useConnect)(),{UserState:f,UserDispatch:v}=l.a.useContext(E),[h,C]=l.a.useState(!1),[b,N]=l.a.useState(1),[O,A]=l.a.useState(null),[y,T]=l.a.useState(!1),[R,x]=l.a.useState(!1);let{collection:L}=Object(H.g)();const w=Object(H.f)(),[U,M]=l.a.useState(0),[z,P]=l.a.useState([]),F=()=>((e,t,a,n)=>{const l=["claim_punk","claim_multiple","buy_package","buy_package_with_token","claim_multiple_with_token","claim_punk_with_token"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(f.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[L].address+"."+S.COLLECTIONS[L].ctr_name,P),[B,Y]=l.a.useState(!1),[q,X]=l.a.useState(null),[V,J]=l.a.useState(!1),Z=()=>{V||(J(!0),D([],f,S.COLLECTIONS[L],e=>{console.log("mint resume result",e),m(e),s(!0),J(!1),S.COLLECTIONS[L].is_extended&&(console.log("IS LOCKED STX",e["locked-stx-buy"],e["locked-stx-buy"].value),e["locked-stx-buy"].value?me(!0):(X("STACKS"),Y(!0),me()))},e=>{s(!0),J(!1)}))},[Q,$]=l.a.useState([]),[ee,te]=l.a.useState(!1),[ae,ne]=l.a.useState([]),[le,se]=l.a.useState({}),[re,ce]=l.a.useState({}),[oe,ie]=l.a.useState(),de=async e=>new Promise(async(t,a)=>{console.log("TOKEN",Object(_.b)(e));let n=Object(_.b)(e);console.log("prendo valore decimali",n.value.value["token-contract"].value);let l=await K({ctx:n.value.value["token-contract"].value},f,S.COLLECTIONS[L]),s=await W({ctx:n.value.value["token-contract"].value},f,S.COLLECTIONS[L]);t({tokenContract:n.value.value["token-contract"].value,decimals:l.value.value,balance:s.value.value,tokenName:n.value.value["token-name"].value,amount:n.value.value.amount.value})}),me=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];oe||(ie(!0),j({},f,S.COLLECTIONS[L],async t=>{let a={},n={},l=[];for(let e=0;e<t.length;e++){let s=await de(t[e]);l.push(s),n[Object(_.b)(t[e]).value.value["token-contract"].value]=parseInt(s.balance),a[Object(_.b)(t[e]).value.value["token-contract"].value]=parseInt(s.decimals)}console.log("tkns",l),ne(l),ce(n),se(a),e&&X(l[0].tokenContract),ie(!1)},e=>{ie(!1)}))};l.a.useEffect(()=>{s(!1),Z(),r||(c(!0),k([],f,S.COLLECTIONS[L],e=>{console.log("multi result",e),n||s(!0),c(!1),C(e&&!S.COLLECTIONS[L].hide_multiple)},e=>{console.log("err multi",e),c(!1),C(!1)})),S.COLLECTIONS[L].is_extended&&(ee||(te(!0),I({},f,S.COLLECTIONS[L],e=>{$(e.value),te(!1)},e=>{te(!1)}))),F();let e=setInterval(()=>F(),5e3);return()=>clearInterval(e)},[L,w]);const ue=()=>{var e,t,a,n,l;let s=parseInt(d.last_punk_id.value)-parseInt(d.last_nft_id.value),r=parseInt((null===(e=d.minted_tokens)||void 0===e?void 0:e.value)||0),c=(0==parseInt(null===(t=d.mint_event)||void 0===t||null===(a=t.value.address_mint)||void 0===a?void 0:a.value)?100:parseInt(null===(n=d.mint_event)||void 0===n||null===(l=n.value.address_mint)||void 0===l?void 0:l.value))-r;return s<c&&(c=s),c<=100?c:100},Ee=S.COLLECTIONS[L].ctr_name;return n?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"bg_black_el",style:{minHeight:100}},l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:10,md:12,className:"offset-lg-1 offset-md-0"},z.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},z.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff",margin:"12px auto",display:"block"},className:"mb-3",size:"xs",onClick:async()=>Z()},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d&&d["locked-stx-buy"]&&Se(d)&&((e,t)=>{try{return e.length>1||e.length>0&&!t}catch(a){return!1}})(ae,d["locked-stx-buy"].value)?l.a.createElement("div",{className:"buy_options",style:{textAlign:"center"}},l.a.createElement("b",{className:"tit"},"SELECT BUY OPTIONS"),l.a.createElement("br",null),d["locked-stx-buy"].value?null:l.a.createElement("span",{className:"STACKS"==q?"selectable selected":"selectable",onClick:()=>X("STACKS")},"STX"),ae.map((e,t,a)=>l.a.createElement("span",{key:"tkn_"+t,className:q==e.tokenContract?"selectable selected":"selectable",onClick:()=>{console.log("CURRENT DECIMALS",le,re),X(e.tokenContract)}},e.tokenName)),window.BUY_TOKEN_MAIN_TOKEN_CTX&&window.BUY_TOKEN_MAIN_TOKEN_CTX===q?l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(p.a,{color:"primary",className:"main-btn",size:"lg",onClick:()=>{a.push("/buytoken")}},l.a.createElement("b",null,"BUY ",null===(t=ae.find(e=>e.tokenContract===q))||void 0===t?void 0:t.tokenName))):null):null)),l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:4},l.a.createElement(p.g,{getChildContext:null,next:()=>{Te(L).length},previous:()=>{U>0||Te(L).length},activeIndex:U},l.a.createElement(p.i,{items:Te(L),activeIndex:U,onClickHandler:e=>M(e)}),Te(L).map((e,t,a)=>l.a.createElement(p.j,{key:"car_"+t},l.a.createElement(_e,{metadata_url:e}))),l.a.createElement(p.h,{direction:"prev",directionText:"Previous",onClickHandler:()=>{let e=Te(L),t=0===U?e.length-1:U-1;M(t)}}),l.a.createElement(p.h,{direction:"next",directionText:"Next",onClickHandler:()=>{let e=Te(L),t=U===e.length-1?0:U+1;M(t)}}))),l.a.createElement(p.k,{lg:8},l.a.createElement("div",{className:"event_container"},(()=>{var e,t,a,n,s,r,c,o,i,m,u,E,v,_,C,O,A;return"Punks-Army-Friends-NFTs"==Ee&&!ye(d)&&(null===(e=d.last_nft_id)||void 0===e?void 0:e.value)&&(null===(t=d.last_nft_id)||void 0===t?void 0:t.value)>0?l.a.createElement("p",{className:"text-danger big-text"},S.COLLECTIONS[L].name," ",l.a.createElement("br",null)," ARE SOLD OUT "):!ye(d)&&(null===(a=d.last_nft_id)||void 0===a?void 0:a.value)&&(null===(n=d.last_nft_id)||void 0===n?void 0:n.value)>0?l.a.createElement("p",{className:"text-danger big-text"},S.COLLECTIONS[L].name," ARE SOLD OUT ",ke(parseInt((null===(s=d.last_nft_id)||void 0===s?void 0:s.value)||0)),"/",ke(parseInt((null===(r=d.last_nft_id)||void 0===r?void 0:r.value)||0))):Ne(d)?Oe(d)?Ae(d)?ye(d)?Se(d)?l.a.createElement(l.a.Fragment,null,h&&(parseInt(null===(c=d.mint_event)||void 0===c||null===(o=c.value.address_mint)||void 0===o?void 0:o.value)>1||0==parseInt(null===(i=d.mint_event)||void 0===i||null===(m=i.value.address_mint)||void 0===m?void 0:m.value))?l.a.createElement("div",{className:"w_box multiple_mint_select",style:{margin:"10px auto"}},l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{className:"to-mint-input",value:b,type:"number",id:"max_mint",min:1,style:{color:"#000"},onBlur:e=>{let t=ue();parseInt(b)<1||isNaN(b)?N(1):parseInt(b)>t&&N(t)},onChange:e=>{N(parseInt(e.target.value))}}),l.a.createElement(p.s,{for:"max_mint",style:{color:"#000"}},"Select how much NFTs to mint"))):null,l.a.createElement("div",{className:"mint_block"},l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:4},l.a.createElement("span",{className:"number"},parseInt((null===(u=d.last_punk_id)||void 0===u?void 0:u.value)||0)),l.a.createElement("span",{className:"txt"},"TOTAL Nfts")),l.a.createElement(p.k,{xs:4},l.a.createElement("span",{className:"number"},parseInt((null===(E=d.last_punk_id)||void 0===E?void 0:E.value)||0)-parseInt((null===(v=d.last_nft_id)||void 0===v?void 0:v.value)||0)),l.a.createElement("span",{className:"txt"},"REMAINING Nfts")),l.a.createElement(p.k,{xs:4},l.a.createElement("span",{className:"number"},parseInt(null===(_=d.mint_event)||void 0===_||null===(C=_.value.address_mint)||void 0===C?void 0:C.value)>0?null===(O=d.mint_event)||void 0===O||null===(A=O.value.address_mint)||void 0===A?void 0:A.value:"\u221e"),l.a.createElement("span",{className:"txt"},"MAX ALLOWED"))),l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},S.COLLECTIONS[L].hide_single_mint?null:l.a.createElement(p.a,{color:"danger",style:{color:"#fff"},size:"lg",className:"mt-3",onClick:async()=>{if(y)return void console.log("claiming");T(!0);let e=null;if("STX"!=q){e=ae.find(e=>e.tokenContract===q)}if(b&&b>1){let t=ue(),a=b;a>t?a=t:(isNaN(a)||a<1)&&(a=1),G.mintMultiple({amount:a,token:e},f,S.COLLECTIONS[L],be(L,d,ae,le,q,1),g,e=>{console.log("res mint",e),T(!1),x(!0),N(1),F()},e=>{console.log("error",e),T(!1)})}else G.mint({token:e},f,S.COLLECTIONS[L],be(L,d,ae,le,q,1),g,e=>{console.log("res mint",e),T(!1),x(!0),F()},e=>{console.log("error",e),T(!1)})}},y?l.a.createElement(p.C,{color:"#000",size:"lg"}):l.a.createElement("b",null,"MINT ",be(L,d,ae,le,q)>0?Ce(L,d,ae,le,q,b||1):"FREE"))))),l.a.createElement("div",{className:"package_list"},l.a.createElement(p.B,null,Q.sort((e,t)=>e.value.order>t.value.order?-1:1).map((e,t,a)=>l.a.createElement(p.k,{sm:12,md:6,key:"pack_"+t,style:{marginTop:12}},l.a.createElement("div",{className:"w_box"},l.a.createElement("h3",{style:{color:"#000"}},"#",e.value.id.value),l.a.createElement("p",null,"NFT YOU GET: ",e.value.nftget.value,l.a.createElement("br",null),"NFT YOU PAY: ",e.value.nftpaid.value,l.a.createElement("br",null),"QTY LEFT: ",e.value.qty.value-e.value.bought.value),l.a.createElement("p",null,l.a.createElement("b",{style:{color:"#000"}},"PRICE:")," ",Ce(L,d,ae,le,q,e.value.nftpaid.value)),parseInt(e.value.qty.value)-parseInt(e.value.bought.value)<=0?l.a.createElement("p",{className:"text-danger",style:{fontSize:12,lineHeight:"45px"}},"NOT AVAIBLE"):parseInt(d.last_punk_id.value)-parseInt(d.last_nft_id.value)<e.value.nftget.value?l.a.createElement("p",{className:"text-danger",style:{fontSize:12,lineHeight:"45px"}},"NOT ENOUGH NFTs"):l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{if(y)return;T(!0);let t=null;if("STX"!=q){t=ae.find(e=>e.tokenContract===q)}G.buyPackage({id:e.value.id.value,token:t,amount:e.value.nftget.value},f,S.COLLECTIONS[L],be(L,d,ae,le,q,e.value.nftpaid.value),g,e=>{T(!1)},e=>{T(!1)})}},y?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"SELECT")))))))):l.a.createElement("p",{className:"text-danger"},"SORRY YOU CANNOT MINT"):l.a.createElement("p",{className:"text-danger big-text"},"THERE ARE NO MORE NFT TO MINT"):l.a.createElement("p",{className:"text-danger big-text"},"SORRY YOU CANNOT MINT"):l.a.createElement("p",{className:"text-danger big-text"},"YOU DO NOT HAVE ENOUGH STX TO MINT"):l.a.createElement("p",{className:"text-danger big-text"},"MINT IS CLOSED")})()))),l.a.createElement("div",{className:"event_container"}))))):l.a.createElement("div",{style:{minHeight:100,textAlign:"center"}},l.a.createElement(p.C,{color:"white"}))})),xe=a(32),Le=a.n(xe);var De=se({route:"Transactions",hasHeader:!0},e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doOpenAuth:o}=Object(u.useConnect)();let{collection:i}=Object(H.g)();Object(H.f)();const[d,m]=l.a.useState([]),g=S.COLLECTIONS[i].address+"."+S.COLLECTIONS[i].ctr_name,f=async()=>{r||(c(!0),fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/transactions?limit=50&unanchored=true").then(e=>e.json()).then(e=>{s(!0);let t=[];console.log("txs",e),e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==g&&(console.log("metto transazione"),t.push(e))}),m(t),c(!1)},e=>{s(!0),c(!1)}))};l.a.useEffect(()=>{n||f()});const v=e=>{switch(e){case"success":return"text-success";case"error":case"abort_by_response":return"text-danger";default:return""}};return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},l.a.createElement("h3",{className:"subtitle"},"RECENT TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>f()},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d.map(e=>{return l.a.createElement(p.b,{style:{marginBottom:12,borderRadius:5,background:"#fff",border:"none"},key:"tx_"+e.tx_id},l.a.createElement(p.c,null,l.a.createElement(p.f,{tag:"h5"},e.tx_id),l.a.createElement(p.d,{className:"mb-2 text-muted",tag:"h6"},l.a.createElement("span",{className:v(e.tx_status)},e.tx_status," ",e.is_unanchored?" (unanchored)":""),l.a.createElement("br",null),(t=e.parent_burn_block_time_iso,Le()(t).format("YYYY.MM.DD HH:mm:ss"))),l.a.createElement(p.e,null,l.a.createElement("b",null,e.contract_call.function_name))));var t})))}),we=a(13);var je=se({route:"YourPunks",hasHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{doContractCall:r}=Object(u.useConnect)(),[c,o]=l.a.useState([]),{UserState:i,UserDispatch:d}=l.a.useContext(E);let{collection:m}=Object(H.g)();const[g,f]=l.a.useState(!1),[v,h]=l.a.useState([]),[C,b]=l.a.useState(!1),N=()=>((e,t,a,n)=>{const l=["burn-token"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(i.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[m].address+"."+S.COLLECTIONS[m].ctr_name,h),[O,A]=l.a.useState(1),y=(e,t)=>{console.log("_______________CARICO PAGINA",t);let n=Le()().unix(),l=S.STACKS_API_BASE_URL+"/extended/v1/address/"+i.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/nft_events?t="+n+"&limit=50";t>1&&(l+="&offset="+(50*t-50)),fetch(l).then(e=>e.json()).then(n=>{a(!0);let l=[...e];if(n.nft_events.map(e=>{try{if(e.asset_identifier==S.COLLECTIONS[m].address+"."+S.COLLECTIONS[m].ctr_name+"::"+S.COLLECTIONS[m].tkn){let t=Object(we.i)(e.value.hex);try{let e=Object(_.b)(t).value;-1===l.indexOf(e)&&l.push(e)}catch(e){console.log("e",e)}}}catch(e){console.log("e",e)}}),n.total>50){let s=parseInt(n.total/50),r=n.total%50;r>0&&(s+=1),console.log("total pages",r,n.total,s),t+1<=s?(console.log("imposto ids",e),y(l,t+1)):(console.log("imposto ids finali",e),o(l),a(!0))}else o(l),a(!0)},e=>{})};return l.a.useEffect(()=>{if(!t){Le()().unix();const e=async()=>y(c,1);R([],i,S.COLLECTIONS[m],e=>{console.log("res",e),f(e)},e=>null),e(),N();let t=setInterval(()=>N(),5e3);return()=>clearInterval(t)}}),l.a.createElement("div",null,l.a.createElement("h3",{className:"subtitle"},"YOUR NFTS"),l.a.createElement(p.B,null,l.a.createElement(p.k,{className:""},v.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},v.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))))),l.a.createElement(p.B,{style:{overflow:"visible"}},c.map(e=>l.a.createElement(p.k,{style:{padding:20,overflow:"visible",textAlign:"center"},sm:6,xs:12,md:4},l.a.createElement(he,{id:e,key:"punk_id_"+e,collection:m}),g?l.a.createElement(p.a,{id:"load_more_punks",color:"primary",style:{color:"#fff",margin:"12px auto",display:"block",marginTop:-20},className:"mb-3",size:"xs",onClick:async()=>{console.log("burn"),C||(b(!0),G.burn({token_id:e},i,S.COLLECTIONS[m],r,e=>{console.log("res burn",e),b(!1),N()},e=>{console.log("error",e),b(!1)}))}},"BURN"):null))))});class Ie extends l.a.Component{constructor(){super(...arguments),this.state={loading:!0,mounted:!1,currentTab:"none"}}getChild(){switch(this.state.currentTab){case"mint":return l.a.createElement(Re,null);case"whitelist":return l.a.createElement(ce,null);case"event":return l.a.createElement(me,null);case"add_punk":return l.a.createElement(ue,null);case"txs":return l.a.createElement(De,null);case"minted":return l.a.createElement(je,null);default:return null}}render(){return l.a.createElement(p.l,{fluid:!0},l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:12,sm:12,md:12},l.a.createElement("div",{style:{marginTop:28,marginBottom:28}},l.a.createElement("div",null,l.a.createElement("b",null,"ADDRESS"),": ",this.context.UserState.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],l.a.createElement("br",null),l.a.createElement("a",{href:"#",onClick:async()=>{d.signUserOut(),this.context.UserDispatch({type:"logout"})}},"Sign out")),this.state.loading?l.a.createElement(p.C,{color:"primary"}):l.a.createElement(p.x,{pills:!0,center:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{active:"mint"===this.state.currentTab,onClick:()=>this.setState({currentTab:"mint"}),href:"#"},"Mint your punk")),l.a.createElement(p.y,null,l.a.createElement(p.z,{active:"minted"===this.state.currentTab,onClick:()=>this.setState({currentTab:"minted"}),href:"#"},"Your minted punks")),this.context.UserState.isOwner?l.a.createElement(p.y,null,l.a.createElement(p.z,{href:"#",active:"whitelist"===this.state.currentTab,onClick:()=>this.setState({currentTab:"whitelist"})},"Whitelist")):null,this.context.UserState.isOwner?l.a.createElement(p.y,null,l.a.createElement(p.z,{href:"#",active:"event"===this.state.currentTab,onClick:()=>this.setState({currentTab:"event"})},"Mint event")):null,this.context.UserState.isOwner?l.a.createElement(p.y,null,l.a.createElement(p.z,{href:"#",active:"add_punk"===this.state.currentTab,onClick:()=>this.setState({currentTab:"add_punk"})},"Add punks")):null,this.context.UserState.isOwner?l.a.createElement(p.y,null,l.a.createElement(p.z,{href:"#",active:"txs"===this.state.currentTab,onClick:()=>this.setState({currentTab:"txs"})},"Transactions")):null)),l.a.createElement("div",{className:"clearfix"}),l.a.createElement(p.l,{fluid:"true"},this.getChild()))))}}Ie.contextType=E;var Ke=se({route:"Home",hasHeader:!0},(function(e){const{UserState:t,UserDispatch:a}=l.a.useContext(E);return l.a.createElement(p.l,null)}));var We=se({route:"Tokens",hasHeader:!0},(function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(null),{doContractCall:o}=Object(u.useConnect)(),{UserState:i,UserDispatch:d}=l.a.useContext(E),[m,g]=l.a.useState(!1),[f,v]=l.a.useState(!1),[h,C]=l.a.useState(!1),[b,N]=l.a.useState(0),[O,A]=l.a.useState(""),[y,T]=l.a.useState(""),[k,R]=l.a.useState(0),[x,L]=l.a.useState(!1),[w,I]=l.a.useState(!1);let{collection:K}=Object(H.g)();const W=Object(H.f)(),[U,M]=l.a.useState([]),[z,P]=l.a.useState([]),F=()=>((e,t,a,n)=>{const l=["set-token-price","remove-token-price","set-lock-stx-acquire","set-stx-price"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(i.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[K].address+"."+S.COLLECTIONS[K].ctr_name,M),B=()=>{n||(s(!0),j({},i,S.COLLECTIONS[K],e=>{console.log("-------------TOKENS------------",e),t||a(!0),console.log("tkns",e),P(e),s(!1)},e=>{t||a(!0),g(!1),s(!1)}),D([],i,S.COLLECTIONS[K],e=>{console.log("-------------EVENT DATA------------",e),console.log("Mint event",e),e["stx-price"]&&R(e["stx-price"].value/1e6||0),console.log(e["locked-stx-buy"].value),v(e["locked-stx-buy"].value||!1)},e=>{}))};return l.a.useEffect(()=>{B(),F();let e=setInterval(()=>F(),5e3);return()=>clearInterval(e)},[K,W]),t?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:""},U.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},U.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>B()},n?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement("div",{style:{height:24,width:"100%"}}),l.a.createElement("h3",{className:"subtitle"},"SET STX PRICE"),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{h||(C(!0),G.setLockStxAcquire({lock:!f},i,S.COLLECTIONS[K],o,e=>{C(!1),F()},e=>{C(!1)}))}},h?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,f?"ENABLE STX BUY":"DISABLE STX BUY")),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Fill in the form and confirm"),l.a.createElement(p.q,{floating:!0},l.a.createElement(oe.a,{decimalSeparator:".",groupSeparator:",",className:"form-control",id:"fee",value:k,onValueChange:(e,t)=>{R(e)}}),l.a.createElement(p.s,{for:"fee"},"STX Fee")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{let e="",t=(k||"0").split(".");if(console.log("splitted",t),e+=String(t[0]),t[1]){let a=String(t[1]);1==a.length&&(a+="0"),e+=a}else e+="00";let a=parseInt(1e4*e);x||(L(!0),G.setStxPrice({amount:a},i,S.COLLECTIONS[K],o,e=>{L(!1),F()},e=>{L(!1)}))}},x?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm"))),l.a.createElement("h3",{className:"subtitle",style:{marginTop:42}},"SET TOKEN PRICE"),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Fill in the form and confirm"),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:b,type:"number",id:"price",onChange:e=>N(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"UNIT PRICE (set full value with all decimals)")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:O,type:"text",id:"ctx",onChange:e=>A(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"Token contract")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:y,type:"text",id:"name",onChange:e=>T(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"Token name")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{x||(L(!0),G.setTokenPrice({tokenContract:O,amount:b,tokenName:y},i,S.COLLECTIONS[K],o,e=>{L(!1),F()},e=>{L(!1)}))}},x?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm")))),l.a.createElement(p.k,{lg:6,md:12,className:""},l.a.createElement("h3",{className:"subtitle"},"AVAIBLE TOKENS"),l.a.createElement(p.t,{type:"unstyled",className:"addresses_list"},z.map((e,t,a)=>(console.log("TOKEN",e),l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},l.a.createElement(p.a,{disabled:w,close:!0,onClick:()=>{if(console.log(Object(_.b)(e)),w)return;let t=Object(_.b)(e);I(!0),G.removeTokenPrice({tokenContract:t.value.value["token-contract"].value},i,S.COLLECTIONS[K],o,e=>{I(!1),F()},e=>{I(!1)})}}),l.a.createElement("span",null,e.value.data["token-name"].data,": ",parseInt(e.value.data.amount.value))))))))):l.a.createElement(p.C,{color:"primary"})}));var Ue=se({route:"Tokens",hasHeader:!0},(function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(null),{doContractCall:o}=Object(u.useConnect)(),{UserState:i,UserDispatch:d}=l.a.useContext(E),[m,g]=l.a.useState([]),[f,v]=l.a.useState(!1),[h,C]=l.a.useState(!1),[b,N]=l.a.useState(1),[O,A]=l.a.useState(1),[y,T]=l.a.useState(1),[k,R]=l.a.useState(1);let{collection:x}=Object(H.g)();const L=Object(H.f)(),[D,w]=l.a.useState([]),[j,K]=l.a.useState([]),W=()=>((e,t,a,n)=>{const l=["add-package","edit-package","remove-package"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(i.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[x].address+"."+S.COLLECTIONS[x].ctr_name,w),U=()=>{n||(s(!0),I({},i,S.COLLECTIONS[x],e=>{console.log("-------------PACKAGES------------",e),t||a(!0),console.log("packages",e),g(e.value),s(!1)},e=>{t||a(!0),setIsOpen(!1),s(!1)}))};return l.a.useEffect(()=>{U(),W();let e=setInterval(()=>W(),5e3);return()=>clearInterval(e)},[x,L]),t?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:""},D.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},D.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>U()},n?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement("div",{style:{height:24,width:"100%"}}),l.a.createElement("h3",{className:"subtitle",style:{marginTop:42}},"ADD PACKAGE"),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Fill in the form and confirm"),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:b,type:"number",id:"price",onChange:e=>N(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"NUMBER OF NFT GET")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:O,type:"number",id:"price",onChange:e=>A(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"NUMBER OF NFT PAID")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:k,type:"number",id:"price",onChange:e=>R(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"Quantity")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:y,type:"number",id:"price",onChange:e=>T(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"ORDER TO SHOW")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{f||(v(!0),G.addPackage({nftget:b,nftpaid:O,order:y,qty:k},i,S.COLLECTIONS[x],o,e=>{v(!1),W()},e=>{v(!1)}))}},f?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm")))),l.a.createElement(p.k,{lg:6,md:12,className:""},l.a.createElement("h3",{className:"subtitle"},"PACKAGES"),l.a.createElement(p.t,{type:"unstyled",className:""},m.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3",marginTop:24}},l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"DELETE PACKAGE"),l.a.createElement(p.a,{disabled:h,close:!0,onClick:()=>{if(console.log(Object(_.b)(e)),h)return;Object(_.b)(e);C(!0),G.removePackage({id:e.value.id.value},i,S.COLLECTIONS[x],o,e=>{C(!1),W()},e=>{C(!1)})}}),l.a.createElement("h3",null,"EDIT PACKAGE #",e.value.id.value),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:e.value.nftget.value,type:"number",id:"price",onChange:t=>{let a=m.map(a=>a.value.id.value===e.value.id.value?{...a,value:{...a.value,nftget:{...a.value.nftget,value:t.target.value}}}:a);g(a)}}),l.a.createElement(p.s,{for:"max_mint"},"NUMBER OF NFT GET")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:e.value.nftpaid.value,type:"number",id:"price",onChange:t=>{let a=m.map(a=>a.value.id.value===e.value.id.value?{...a,value:{...a.value,nftpaid:{...a.value.nftpaid,value:t.target.value}}}:a);g(a)}}),l.a.createElement(p.s,{for:"max_mint"},"NUMBER OF NFT PAID")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:e.value.qty.value,type:"number",id:"price",onChange:t=>{let a=m.map(a=>a.value.id.value===e.value.id.value?{...a,value:{...a.value,qty:{...a.value.qty,value:t.target.value}}}:a);g(a)}}),l.a.createElement(p.s,{for:"max_mint"},"Quantity")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:e.value.order.value,type:"number",id:"price",onChange:t=>{let a=m.map(a=>a.value.id.value===e.value.id.value?{...a,value:{...a.value,order:{...a.value.order,value:t.target.value}}}:a);g(a)}}),l.a.createElement(p.s,{for:"max_mint"},"ORDER TO SHOW")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{f||(v(!0),G.editPackage({id:e.value.id.value,nftget:e.value.nftget.value,nftpaid:e.value.nftpaid.value,order:e.value.order.value,qty:e.value.qty.value},i,S.COLLECTIONS[x],o,e=>{v(!1),W()},e=>{v(!1)}))}},f?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm"))))))))):l.a.createElement(p.C,{color:"primary"})}));var Me=se({route:"Gallery",hasHeader:!0,hide_nav:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1);return l.a.useEffect(()=>{m(1)},[o]),l.a.createElement("div",null,l.a.createElement("h3",{className:"subtitle"},(e=>{try{return S.COLLECTIONS[e].name}catch(t){return""}})(o)," GALLERY"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"BACK TO HOME"),l.a.createElement(p.B,{style:{overflow:"visible"}},((e,t)=>{try{return J[S.COLLECTIONS[e].full_gallery_name].slice(0,9*t)}catch(a){return console.log("e",a),[]}})(o,d).map(e=>l.a.createElement(p.k,{style:{padding:20,overflow:"visible",textAlign:"center"},sm:6,xs:12,md:4},l.a.createElement(_e,{metadata_url:e,key:"punk_id_"+e,collection:S.COLLECTIONS[o]})))),((e,t)=>{try{return J[S.COLLECTIONS[e].full_gallery_name].length>9*t}catch(a){return!1}})(o,d)?l.a.createElement(p.a,{id:"load_more_punks",color:"primary",style:{color:"#fff",margin:"12px auto",display:"block"},className:"mb-3",size:"xs",onClick:async()=>m(d+1)},"LOAD MORE"):null)});var ze=se({route:"ChangePunkMetadataUrl",hasHeader:!0},(function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doContractCall:o}=Object(u.useConnect)(),{UserState:i,UserDispatch:d}=l.a.useContext(E),[m,g]=l.a.useState(!1),[f,v]=l.a.useState(""),[_,h]=l.a.useState(0);let{collection:C}=Object(H.g)();const b=Object(H.f)(),[N,O]=l.a.useState([]),A=()=>((e,t,a,n)=>{const l=["set_punk_metadata_url"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(i.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[C].address+"."+S.COLLECTIONS[C].ctr_name,O);return l.a.useEffect(()=>{a(!0),A();let e=setInterval(()=>A(),5e3);return()=>clearInterval(e)},[C,b]),t?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},N.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},N.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>A()},n?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement("div",{style:{height:24,width:"100%"}}),l.a.createElement("h3",{className:"subtitle"},"CHANGE METADATA URL"),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Fill in the form and confirm"),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:_,type:"number",id:"max_mint",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"NFT ID")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:f,type:"text",id:"max_mint",onChange:e=>v(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"IPFS URL")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{r||(c(!0),G.chMetadata({id:_,metadata_url:f},i,S.COLLECTIONS[C],o,e=>{c(!1),g(!1),A()},e=>{c(!1)}))}},r?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm")))),l.a.createElement("div",{style:{marginTop:24}},l.a.createElement(p.B,null,l.a.createElement(p.a,{id:"confirm_open",color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:()=>g(!m)},m?"HIDE PREVIEW":"SHOW PREVIEW"),l.a.createElement(p.k,{lg:6,sm:12},l.a.createElement("h3",{className:"subtitle"},"PREVIEW NFT"),m?l.a.createElement(he,{id:_,collection:C}):null),l.a.createElement(p.k,{lg:6,sm:12},l.a.createElement("h3",{className:"subtitle"},"PREVIEW NEW METADATA URL"),m?l.a.createElement(_e,{metadata_url:f,collection:C}):null))))):l.a.createElement(p.C,{color:"primary"})}));var Pe=se({route:"Rarity",hasHeader:!1,hide_nav:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1),[u,g]=l.a.useState(0),[f,v]=l.a.useState(!1);return l.a.createElement("div",{style:{marginTop:"20vh"}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},l.a.createElement("h3",{className:"subtitle"},S.COLLECTIONS[o].name.toUpperCase()," RARITY CHECK"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"GO TO HOME"),S.COLLECTIONS[o].has_rarity?l.a.createElement(l.a.Fragment,null,f?l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{g(0),v(!1)}},"Search another"):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{style:{color:"#fff"}},"Search NFT rarity"),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:u,type:"number",id:"max_mint",onChange:e=>g(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"NFT #")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{u<1||u>2e3?alert("Set a number between 1 and 2000"):v(!0)}},"Show NFT")),f?l.a.createElement("div",null,l.a.createElement("p",null,"NFT"),l.a.createElement(he,{id:u,key:"punk_id_"+u,collection:o})):null):l.a.createElement("p",{style:{color:"#fff"}},"The collection you're looking for doesn't have rarity points at the moment"))))});var Fe=se({route:"AddCommissionCtx",hasHeader:!0},(function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(""),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0);let{collection:_}=Object(H.g)();const h=Object(H.f)(),[C,b]=l.a.useState([]),[N,O]=l.a.useState(0),A=(e,t,a,n)=>{let l=e+t,s=a.slice(e,l);s.length>0?G.addCommissionCtx({list:s,amount:n},c,S.COLLECTIONS[_],r,e=>{v(l),a.length>l-1?setTimeout(()=>A(l,t,a,n),500):d(!1),y()},e=>{d(!1),y()}):d(!1)},y=()=>((e,t,a,n)=>{const l=["add-address-to-commission"];fetch(S.STACKS_API_BASE_URL+"/extended/v1/address/"+e+"/mempool?limit=50&unanchored=true").then(e=>e.json()).then(async e=>{console.log("-----------------MEMPOOL TRANSACTIONS------------------",e);let n=[];await e.results.map(e=>{"contract_call"==e.tx_type&&e.contract_call&&e.contract_call.contract_id==t&&-1!==l.indexOf(e.contract_call.function_name)&&n.push(e)}),a(n)},e=>{})})(c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],S.COLLECTIONS[_].address+"."+S.COLLECTIONS[_].ctr_name,b);return l.a.useEffect(()=>{if(!t){a(!0),y();let e=setInterval(()=>y(),5e3);return()=>clearInterval(e)}},[_,h]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},C.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},C.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement("h3",{className:"subtitle"},"Add commission contracts"),l.a.createElement("p",{style:{color:"#fff"}},"Copy and paste a json array in the editor and then call the function"),i?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Process: ",f,"/",m)):l.a.createElement(re.a,{value:n,language:"js",placeholder:'Please enter a json list of metadata_url (es. \n\t[\n\t\t"address1", "address2"\n\t]\n)\n\t\t\t      \t',onChange:e=>s(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement("div",{style:{marginTop:24}},l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:N,type:"number",id:"max_mint",onChange:e=>O(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"Commission percentage"))),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(i)return;let e=JSON.parse(n);g(e.length),d(!0),A(0,200,e,N)}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD LIST")))))}));const Be=window.UPGRADE_CONTRACT.split(".")[0],Ge=window.UPGRADE_CONTRACT.split(".")[1];var He=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Be,contractName:Ge,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},Ye=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{punk_id:null,weapon_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=[];const r=U.m.DoesNotOwn,c=Object(M.g)(window.UPGRADE_PUNK_CONTRACT.split(".")[0],window.UPGRADE_PUNK_CONTRACT.split(".")[1],window.UPGRADE_PUNK_CONTRACT_TOKEN);s.push(Object(b.f)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],r,c,Object(h.b)(e.punk_id)));const o=Object(M.g)(window.UPGRADE_WEAPONS_CONTRACT.split(".")[0],window.UPGRADE_WEAPONS_CONTRACT.split(".")[1],window.UPGRADE_WEAPONS_CONTRACT_TOKEN);s.push(Object(b.f)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],r,o,Object(h.b)(e.weapon_id))),a({contractAddress:Be,contractName:Ge,functionName:"upgrade",functionArgs:[Object(h.b)(e.punk_id),Object(C.a)(window.UPGRADE_PUNK_CONTRACT.split(".")[0],window.UPGRADE_PUNK_CONTRACT.split(".")[1]),Object(h.b)(e.weapon_id),Object(C.a)(window.UPGRADE_WEAPONS_CONTRACT.split(".")[0],window.UPGRADE_WEAPONS_CONTRACT.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},postConditions:s,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},qe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Be,contractName:Ge,functionName:"owner-upgrade-data",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},Xe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{upgrade_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Be,contractName:Ge,functionName:"get-upgrade-info",network:S.NETWORK,functionArgs:[Object(h.b)(e.upgrade_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},Ve=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token_id:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e.token_id)try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"get-token-uri",network:S.NETWORK,functionArgs:[Object(h.b)(e.token_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value.value)}catch(s){l&&l(s)}};var Je=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(null),[i,d]=l.a.useState({});return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{Ve({token_id:e.nft_id},s,{address:e.ctx.address,ctr_name:e.ctx.name},async t=>{console.log("nft results id "+e.nft_id,t);let a=await de.ipfs_gateway(t.value);console.log("prendo valore da url",a),fetch(a).then(e=>e.json()).then(t=>{console.log("PUNK RESULT ID "+e.nft_id,t);let a=!!(t.attributes&&t.attributes.length>0);t.attributes&&t.attributes.map(e=>("Hand"==e.trait_type&&(a=!1),"Type"!=e.trait_type||e.value.toUpperCase().match(/girl/i)||e.value.toUpperCase().match(/man/i)||(a=!1),e)),a&&d(t)},t=>{console.log("ERROR SINGLE NFT ID: "+e.nft_id,t)})},e=>{console.log("err",e)})},300*e.n_el))},[]),i.image?l.a.createElement(p.k,{xl:4,md:6,sm:12},l.a.createElement("div",{className:"upgrade_avaible"+(e.selected&&e.selected.nft_id==e.nft_id?" selected":"")},l.a.createElement("img",{onClick:()=>{e.selected&&e.selected.nft_id==e.nft_id?e.onSelect(null):e.onSelect({...i,nft_id:e.nft_id})},style:{width:"100%",height:"auto"},src:de.ipfs_gateway(i.image)}))):null};var Ze=e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),[o,i]=l.a.useState([]),d=async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(r)return;c(!0);let n=S.STACKS_API_BASE_URL+"/extended/v1/address/"+t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/mempool?limit=50";fetch(n).then(e=>e.json()).then(async t=>{s(!0),console.log("mem",t);let n=[];await t.results.map(t=>(console.log("tx",t,e.functions,t.contract_call.function_name),"contract_call"==t.tx_type&&t.contract_call&&t.contract_call.contract_id==e.contract&&-1!==e.functions.indexOf(t.contract_call.function_name)&&n.push(t),t)),console.log("list",n),a(n),c(!1)},e=>{s(!0),c(!1)})};l.a.useEffect(()=>{n||d(e=>i([...o,...e]))},[]);return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("h3",{className:"subtitle no-border"},"MEMPOOL TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{d(e=>i(e))}},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement(p.t,{type:"unstyled"},o.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))))};var Qe=function(e){const[t,a]=l.a.useState(!1),n=window.UPGRADE_PUNK_CONTRACT+"::"+window.UPGRADE_PUNK_CONTRACT_TOKEN,{doContractCall:s}=Object(u.useConnect)(),{UserState:r,UserDispatch:c}=l.a.useContext(E),[o,i]=l.a.useState([]);return l.a.useEffect(()=>{if(!t){a(!0);let e=S.STACKS_API_BASE_URL+"/extended/v1/tokens/nft/holdings?principal="+r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"&asset_identifiers="+n;fetch(e).then(e=>e.json()).then(e=>{console.log("nfts",e),i(e.results)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,o.map((t,a,n)=>l.a.createElement(Je,{key:"el_p_"+a,onSelect:e.onSelect,selected:e.selected,n_el:a,nft_id:parseInt(Object(_.b)(Object(we.i)(t.value.hex)).value),ctx:{address:window.UPGRADE_PUNK_CONTRACT.split(".")[0],name:window.UPGRADE_PUNK_CONTRACT.split(".")[1],token:window.UPGRADE_PUNK_CONTRACT_TOKEN}}))))};var $e=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState({});return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{Ve({token_id:e.nft_id},s,{address:e.ctx.address,ctr_name:e.ctx.name},async e=>{console.log("nft results",e);let t=await de.ipfs_gateway(e.value);fetch(t).then(e=>(console.log("risultato arma",e),e.json())).then(e=>{console.log("result weapon",e),e&&e.image&&o(e)},e=>{console.log("e",e)})},e=>{console.log("err",e)})},300*e.n_el))},[]),c.image?l.a.createElement(p.k,{xl:4,md:6,sm:12},l.a.createElement("div",{className:"upgrade_avaible"+(e.selected&&e.selected.nft_id==e.nft_id?" selected":"")},l.a.createElement("img",{onClick:()=>{e.selected&&e.selected.nft_id==e.nft_id?e.onSelect(null):e.onSelect({...c,nft_id:e.nft_id})},style:{width:"100%",height:"auto"},src:de.ipfs_gateway(c.image)}))):null};var et=function(e){const[t,a]=l.a.useState(!1),n=window.UPGRADE_WEAPONS_CONTRACT+"::"+window.UPGRADE_WEAPONS_CONTRACT_TOKEN,{doContractCall:s}=Object(u.useConnect)(),{UserState:r,UserDispatch:c}=l.a.useContext(E),[o,i]=l.a.useState([]);return l.a.useEffect(()=>{if(!t){a(!0);let e=S.STACKS_API_BASE_URL+"/extended/v1/tokens/nft/holdings?principal="+r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"&asset_identifiers="+n;fetch(e).then(e=>e.json()).then(e=>{console.log("nfts",e),i(e.results)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,o.map((t,a,n)=>l.a.createElement($e,{key:"el_p_"+a,onSelect:e.onSelect,selected:e.selected,n_el:a,nft_id:parseInt(Object(_.b)(Object(we.i)(t.value.hex)).value),ctx:{address:window.UPGRADE_WEAPONS_CONTRACT.split(".")[0],name:window.UPGRADE_WEAPONS_CONTRACT.split(".")[1],token:window.UPGRADE_WEAPONS_CONTRACT_TOKEN}}))))};var tt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState({});return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{Ve({token_id:e.nft_id},s,{address:e.ctx.address,ctr_name:e.ctx.name},async e=>{console.log("nft results",e);let t=await de.ipfs_gateway(e.value);fetch(t).then(e=>(console.log("risultato arma",e),e.json())).then(e=>{console.log("result weapon",e),e&&e.image&&o(e)},e=>{console.log("e",e)})},e=>{console.log("err",e)})},300*e.n_el))},[]),c.image?l.a.createElement("img",{onClick:()=>{e.selected&&e.selected.nft_id==e.nft_id?e.onSelect(null):e.onSelect({...c,nft_id:e.nft_id})},style:{width:"100%",height:"auto"},src:de.ipfs_gateway(c.image)}):null};var at=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(null),[i,d]=l.a.useState({});return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{Ve({token_id:e.nft_id},s,{address:e.ctx.address,ctr_name:e.ctx.name},async t=>{console.log("nft results",t);let a=await de.ipfs_gateway(t.value);console.log("prendo valore da url",a),fetch(a).then(e=>e.json()).then(t=>{console.log("PUNK RESULT",t);let a=!!(t.attributes&&t.attributes.length>0);!e.includeHands&&t.attributes&&t.attributes.map(e=>("Hand"==e.trait_type&&(a=!1),"Type"!=e.trait_type||e.value.toUpperCase().match(/girl/i)||e.value.toUpperCase().match(/man/i)||(a=!1),e)),a&&d(t)},e=>{console.log("e",e)})},e=>{console.log("err",e)})},300*e.n_el))},[]),i.image?l.a.createElement("img",{onClick:()=>{e.selected&&e.selected.nft_id==e.nft_id?e.onSelect(null):e.onSelect({...i,nft_id:e.nft_id})},style:{width:"100%",height:"auto"},src:de.ipfs_gateway(i.image)}):null};var nt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(null);return l.a.useEffect(()=>{t||(a(!0),console.log("prendo upgrade info",e),setTimeout(()=>{Xe({upgrade_id:e.id},s,async e=>{console.log("upgrade results",e),o(e.value)},e=>{console.log("err",e)})},300*e.n_el))},[]),c?l.a.createElement(p.B,{style:{marginBottom:24}},l.a.createElement(p.k,{xl:12,md:12,sm:12},l.a.createElement("div",{style:{width:200,float:"left",marginRight:12}},l.a.createElement(at,{nft_id:c["punk-id"].value,ctx:{address:window.UPGRADE_PUNK_CONTRACT.split(".")[0],name:window.UPGRADE_PUNK_CONTRACT.split(".")[1]}})),l.a.createElement("div",{style:{height:200,float:"left",marginRight:12}},l.a.createElement("p",{style:{color:"#fff",lineHeight:"185px",fontSize:175,overflow:"hidden",margin:0,marginLeft:42}},"+")),l.a.createElement("div",{style:{width:200,float:"left",marginRight:12}},l.a.createElement(tt,{nft_id:c["weapon-id"].value,ctx:{address:window.UPGRADE_WEAPONS_CONTRACT.split(".")[0],name:window.UPGRADE_WEAPONS_CONTRACT.split(".")[1]}})),l.a.createElement("div",{style:{height:200,width:200,float:"left",marginRight:12}},l.a.createElement("p",{style:{color:"#fff",lineHeight:"185px",fontSize:175,overflow:"hidden",margin:0,marginLeft:42}}," = ")),c["new-nft-id"]&&c["new-nft-id"].value&&0!=parseInt(c["new-nft-id"].value)?l.a.createElement("div",{style:{width:200,float:"left",marginRight:12}},l.a.createElement(at,{includeHands:!0,nft_id:c["new-nft-id"].value,ctx:{address:window.UPGRADE_PUNK_CONTRACT.split(".")[0],name:window.UPGRADE_PUNK_CONTRACT.split(".")[1]}})):l.a.createElement("div",{style:{width:200,float:"left",marginRight:12}},l.a.createElement("p",{style:{color:"#fff",lineHeight:"185px",fontSize:175,overflow:"hidden",margin:0,marginLeft:42}}," ?")))):null};var lt=se({route:"UpgradeMain",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),[o,i]=l.a.useState(null),[d,m]=l.a.useState(null),{doContractCall:g}=Object(u.useConnect)(),[f,v]=l.a.useState([]),{UserState:_,UserDispatch:h}=l.a.useContext(E);let{collection:C}=Object(H.g)();const b=Object(H.e)(),[N,O]=l.a.useState(!1);return l.a.useEffect(()=>(t||(a(!0),He({address:_.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},_,e=>{O(e)}),qe({address:_.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},_,e=>{console.log("UPGRADE IDS",e),e.value&&e.value.length>0&&v(e.value.map(e=>parseInt(e.value)).reverse())})),()=>a(!1)),[]),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["upgrade","do-upgrade"],contract:window.UPGRADE_CONTRACT})),l.a.createElement(p.k,{lg:12,md:12,sm:12,xs:12,className:"bar-left-custom"},l.a.createElement("h3",{className:"subtitle"},"PUNKS UPGRADE"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>b.push("/")},"BACK TO HOME"),o||d?l.a.createElement(p.B,{style:{overflow:"visible",marginTop:24,marginBottom:24}},l.a.createElement("h3",{style:{color:"#fff",textTransform:"uppercase",fontSize:"18px !important",fontWeight:"bold",textAlign:"center"}},"Currently selected"),l.a.createElement("div",{style:{display:"block",textAlign:"center",margin:"auto"}},o?l.a.createElement("img",{style:{width:200,marginRight:12,height:"auto"},src:de.ipfs_gateway(o.image)}):null,d?l.a.createElement("img",{style:{width:200,height:"auto"},src:de.ipfs_gateway(d.image)}):null),l.a.createElement("div",{style:{display:"block",textAlign:"center",margin:"auto"}},o&&d?l.a.createElement(p.a,{color:"danger",style:{color:"#fff",margin:"12px auto"},className:"mb-3",size:"lg",onClick:async()=>{n||(s(!0),Ye({punk_id:o.nft_id,weapon_id:d.nft_id},_,g,e=>{c(!1),s(!1),i(null),m(null)},e=>{console.log(e),s(!1),c(!0)}))}},"CONFIRM AND UPGRADE!"):null,r?l.a.createElement("p",{style:{color:"#fff"}},"THERE WAS AN ERROR, RETRY UPGRADE"):null)):null,l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:6,md:6,sm:12,xs:12},l.a.createElement("h3",{style:{color:"#fff",textTransform:"uppercase",fontSize:"18px !important",fontWeight:"bold"}},"Select punk to upgrade"),l.a.createElement(Qe,{onSelect:e=>i(e),selected:o})),l.a.createElement(p.k,{lg:6,md:6,sm:12,xs:12},l.a.createElement("h3",{style:{color:"#fff",textTransform:"uppercase",fontSize:"18px !important",fontWeight:"bold"}},"Select a weapon"),l.a.createElement(et,{onSelect:e=>m(e),selected:d}))),l.a.createElement("div",{style:{marginTop:24,marginBottom:24}},f.length>0?l.a.createElement("h3",{className:"subtitle"},"UPGRADE REQUESTS"):null,f.map((e,t,a)=>l.a.createElement(nt,{id:e}))))))});const st=window.STACKING_CONTRACT.split(".")[0],rt=window.STACKING_CONTRACT.split(".")[1];var ct=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:st,contractName:rt,functionName:"add-address-to-administrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},ot=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:st,contractName:rt,functionName:"remove-address-from-adminstrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},it=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:st,contractName:rt,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},dt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null,percentage:null,daily:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{if(console.log("invio lista",e.address),e.address.length>200)return alert("Invalid list length > 200"),void(l&&l("Invalid list length"));let s=[];e.address.map(e=>s.push(Object(C.e)(e))),a({contractAddress:st,contractName:rt,functionName:"add-address-to-bonus",functionArgs:[Object(z.a)(s),Object(h.b)(e.percentage),Object(h.b)(e.daily)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},mt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{if(e.address.length>200)return alert("Invalid list length > 200"),void(l&&l("Invalid list length"));let s=[];e.address.map(e=>s.push(Object(C.e)(e))),a({contractAddress:st,contractName:rt,functionName:"remove-multiple-address-from-bonus",functionArgs:[Object(z.a)(s)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},ut=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contract:null,min:null,max:null,collection_total:null,max_rank:null,daily:null,percentage:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:st,contractName:rt,functionName:"add-collection",functionArgs:[Object(C.a)(e.contract.split(".")[0],e.contract.split(".")[1]),Object(F.a)({"min-import":Object(h.b)(e.min),"max-import":Object(h.b)(e.max),"collection-total":Object(h.b)(e.collection_total),"max-rank":Object(h.b)(e.max_rank),"bonus-daily-step":Object(h.b)(e.daily),"bonus-percentage":Object(h.b)(e.percentage)})],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Et=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contract:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:st,contractName:rt,functionName:"remove-collection",functionArgs:[Object(C.a)(e.contract.split(".")[0],e.contract.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},gt=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:st,contractName:rt,functionName:"full-collection-list",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},ft=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stacking_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:st,contractName:rt,functionName:"get-staking-status",network:S.NETWORK,functionArgs:[Object(h.b)(e.stacking_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},vt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contract:null,nft_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[];const c=t.address,o=t.ctr_name,i=t.tkn,d=U.m.DoesNotOwn,m=Object(M.g)(c,o,i);r.push(Object(b.f)(a.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],d,m,Object(h.b)(e.nft_id))),n({contractAddress:st,contractName:rt,functionName:"stake",functionArgs:[Object(h.b)(e.nft_id),Object(C.a)(e.contract.split(".")[0],e.contract.split(".")[1])],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},postConditions:r,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:a.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},pt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stacking_id:null,nft_id:null,collection:null,token_name:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{console.log("claim",e);let s=[];const r=e.collection.split(".")[0],c=e.collection.split(".")[1],o=e.token_name,i=Object(M.g)(r,c,o);s.push(Object(b.f)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],U.m.Owns,i,Object(h.b)(e.nft_id))),s.push(Object(b.c)(st,rt,U.m.DoesNotOwn,i,Object(h.b)(e.nft_id))),a({contractAddress:st,contractName:rt,functionName:"claim",functionArgs:[Object(h.b)(e.stacking_id),Object(C.a)(e.collection.split(".")[0],e.collection.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},postConditions:s,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},_t=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token_id:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e.token_id)try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"get-token-uri",network:S.NETWORK,functionArgs:[Object(h.b)(e.token_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value.value)}catch(s){l&&l(s)}};var ht=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(null),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(!1);return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{_t({token_id:e.nft_id},s,{address:e.ctx.address,ctr_name:e.ctx.name},e=>{console.log("nft results",e),o(e)},e=>{console.log("err",e)})},300*e.n_el))},[]),c?l.a.createElement("div",{className:"stacking_avaible"},l.a.createElement(_e,{metadata_url:c.value}),l.a.createElement("div",{className:"button_container"},m?l.a.createElement(p.a,{color:"primary",disabled:!0,className:"main-btn",size:"lg",onClick:()=>{}},"STAKED"):l.a.createElement(p.a,{color:"primary",className:"main-btn",size:"lg",onClick:()=>{i||(d(!0),vt({nft_id:e.nft_id,contract:e.ctx.address+"."+e.ctx.name},{address:e.ctx.address,ctr_name:e.ctx.name,tkn:e.ctx.token},s,n,e=>{console.log("res",e),g(!0),d(!1)},e=>{console.log("err",e),d(!1)}))}},i?l.a.createElement(p.C,null):l.a.createElement("b",null,"STAKE")))):null};var Ct=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState([]);return l.a.useEffect(()=>{if(!t){a(!0);let t=S.STACKS_API_BASE_URL+"/extended/v1/tokens/nft/holdings?principal="+s.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"&asset_identifiers="+e.collection.fullName;fetch(t).then(e=>e.json()).then(e=>{console.log("nfts",e),o(e.results)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,c.map((t,a,n)=>l.a.createElement(p.k,{xl:4,md:6,sm:12},l.a.createElement(ht,{n_el:a,nft_id:parseInt(Object(_.b)(Object(we.i)(t.value.hex)).value),ctx:{address:e.collection.collection.split(".")[0],name:e.collection.collection.split(".")[1],token:e.collection.tokenName}})))))};const bt=e=>parseFloat(e/1e6).toFixed(6);var Nt=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState(null),[m,g]=l.a.useState(null),[f,v]=l.a.useState(!1),[C,b]=l.a.useState(null),[N,O]=l.a.useState(null);return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{(async()=>{let t=Object(we.c)(Object(h.b)(e.stacking_id)),a=S.STACKS_API_BASE_URL+"/v2/map_entry/"+window.STACKING_CONTRACT.split(".")[0]+"/"+window.STACKING_CONTRACT.split(".")[1]+"/stacking-map";return(await fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)})).json()})().then(e=>{let t=Object(_.b)(Object(we.i)(e.data));b(t.value.value["nft-collection"].value),O(t.value.value["nft-id"].value),console.log("SINGLE NFT DATA",t),_t({token_id:t.value.value["nft-id"].value},c,{address:t.value.value["nft-collection"].value.split(".")[0],ctr_name:t.value.value["nft-collection"].value.split(".")[1]},e=>{d(e)},e=>{console.log("err",e)})}),ft({stacking_id:e.stacking_id},c,t=>{console.log("minted results NFT ID: "+e.nft_id,t),g(t)},e=>{console.log("err",e)})},2500*e.n_el))},[]),i?l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:4,md:6,sm:6},l.a.createElement(_e,{metadata_url:i.value})),l.a.createElement(p.k,{lg:8,md:6,sm:6},m?l.a.createElement("div",{className:"stacking_container white_content"},l.a.createElement("p",null,l.a.createElement("b",null,"EXPECTED DAILY GAIN:")," ",bt(m["nft-daily-value"].value)," $ROMA"),l.a.createElement("p",null,l.a.createElement("b",null,"CURRENT GAIN:")," ",bt(m.minted.value)," $ROMA"),l.a.createElement("p",null,l.a.createElement("b",null,"TIME BONUS*:")," ",bt(m.bonus.value)," $ROMA"),l.a.createElement("p",null,"*Each 720 Blocks (about 5 days) you gain a 5% bonus on your total Reward"),l.a.createElement("p",null,l.a.createElement("b",null,"OG BONUS**:")," ",bt(m["address-bonus"].value)," $ROMA"),l.a.createElement("p",null,"**If you are an OG, each 144 Blocks (about 1 day) you gain a 2% bonus on your total Reward"),f?null:l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{if(n)return;s(!0);let t="";Object.keys(e.contract_assets).map(e=>{e.split("::")[0]===C&&(t=e.split("::")[1])}),pt({stacking_id:e.stacking_id,nft_id:N,collection:C,token_name:t},c,r,e=>{console.log("claim results",e),s(!1),v(!0)},e=>{console.log("err",e),s(!1)})}},n?l.a.createElement(p.C,{size:"sm"}):"UNSTAKE PUNK AND CLAIM $ROMA"),f?l.a.createElement("p",null,"CLAIMED"):null):null)):null};var Ot=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState([]),[m,g]=l.a.useState({}),f=async()=>{let e=c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],t=Object(we.c)(Object(C.e)(e)),a=S.STACKS_API_BASE_URL+"/v2/map_entry/"+window.STACKING_CONTRACT.split(".")[0]+"/"+window.STACKING_CONTRACT.split(".")[1]+"/stacking-addresses";return(await fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)})).json()};return l.a.useEffect(()=>{if(!t){a(!0),f().then(e=>{let t=Object(_.b)(Object(we.i)(e.data));console.log("dati utente",Object(_.b)(Object(we.i)(e.data))),d(t.value.value.nfts.value.map(e=>parseInt(e.value)))});let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.STACKING_CONTRACT+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("balance",e),g(e.non_fungible_tokens)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{n||(s(!0),f().then(e=>{let t=Object(_.b)(Object(we.i)(e.data));console.log("dati utente",Object(_.b)(Object(we.i)(e.data))),d(t.value.value.nfts.value.map(e=>parseInt(e.value))),s(!1)}).catch(e=>s(!1)))}},n?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement("h3",{style:{color:"#fff"}},"You're staking ",i.length," Nfts"),i.map((e,t,a)=>l.a.createElement(Nt,{key:"stacking_"+t,stacking_id:e,n_el:t,contract_assets:m})))};var At=function(e){const t=Object(H.e)(),[a,n]=l.a.useState(!1),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(!1),{doContractCall:i}=Object(u.useConnect)(),{UserState:d,UserDispatch:m}=l.a.useContext(E),[g,f]=l.a.useState([]),[v,_]=l.a.useState([]),[h,C]=l.a.useState({});return l.a.useEffect(()=>{if(!a){n(!0),gt({},d,e=>{console.log("result collections",e),_(e)},e=>{console.log("err",e)});let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("balance",e),C(e)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},window.STACKING?l.a.createElement(p.a,{id:"back_to_home",color:"danger",style:{color:"#fff",marginBottom:"12px"},className:"mb-3",size:"lg",onClick:async()=>t.push("/stakingv2")},l.a.createElement("b",null,"GO TO STAKING V2")):null),l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["claim","stake"],contract:window.STACKING_CONTRACT})),l.a.createElement(p.k,{xl:6,md:8,sm:12},l.a.createElement("div",{className:"w_box"},l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{if(c)return;o(!0);let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("balance",e),C(e),o(!1)},e=>{console.log("err",e),o(!1)})}},c?l.a.createElement(p.C,{size:"sm"}):"Refresh balance"),l.a.createElement("p",null,l.a.createElement("b",null,"$ROMA BALANCE:")," ",(e=>{let t=0;return e.fungible_tokens&&Object.keys(e.fungible_tokens).map(a=>{a.split("::")[0]===window.TOKEN_CONTRACT&&(t=e.fungible_tokens[a].balance)}),parseFloat(t/1e6).toFixed(2)})(h)))),l.a.createElement(p.k,{xl:6,md:4,sm:12}),l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement("h3",{className:"subtitle",style:{marginTop:24}},"CURRENT STAKING")),l.a.createElement(Ot,null)),l.a.createElement(p.B,null,l.a.createElement(p.k,{xl:12},l.a.createElement("h2",{style:{color:"#fff"}},"Avaible nft to stake"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{s||(r(!0),gt({},d,e=>{console.log("result collections",e),_(e),r(!1)},e=>{console.log("err",e),r(!1)}))}},s?l.a.createElement(p.C,{size:"sm"}):"Refresh collections"),l.a.createElement("div",{style:{marginTop:24}},((e,t)=>{if(!e.non_fungible_tokens||0===t.length)return[];let a=[];return Object.keys(e.non_fungible_tokens).map(e=>(t.find(t=>{var a,n;return(null===(a=t.value)||void 0===a||null===(n=a.collection)||void 0===n?void 0:n.value)===e.split("::")[0]})&&a.push({collection:e.split("::")[0],tokenName:e.split("::")[1],fullName:e}),!0)),a})(h,v).map(e=>l.a.createElement("div",null,l.a.createElement("h3",{className:"subtitle"},e.tokenName),l.a.createElement(Ct,{collection:e}))))))))};var yt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(""),[C,b]=l.a.useState("");let{collection:N}=Object(H.g)();Object(H.f)();const[O,A]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-administrative","remove-address-from-adminstrative"],contract:window.STACKING_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),ct({address:_},s,n,e=>{o(!1),h(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:C,id:"add_address",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),ot({address:C},s,n,e=>{d(!1),b("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var St=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(null),[C,b]=l.a.useState(null),[N,O]=l.a.useState(!1),[A,y]=l.a.useState(""),[S,T]=l.a.useState("");let{collection:k}=Object(H.g)();Object(H.f)();const[R,x]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-bonus","remove-address-from-bonus","remove-multiple-address-from-bonus","set-bonus-percentage"],contract:window.STACKING_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add bonus addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_percentage",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_percentage"},"Bonus percentage (set to 100 for 1%)")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:C,id:"daily",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"daily"},"Daily step")),l.a.createElement("p",null,"ADD LIST OF ADDRESSES"),l.a.createElement(re.a,{value:A,language:"js",placeholder:'Please enter a json list (es. \n\t["ADDRESS1","ADDRESS2"...]\n)\n\t\t\t      \t',onChange:e=>y(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(c)return;o(!0);let e=[];try{e=JSON.parse(A),console.log("lists",e)}catch(t){return void alert("INVALID LIST")}dt({address:e,percentage:_,daily:C},s,n,e=>{o(!1),y(""),h(null),b(null),console.log("add res",e)},e=>{console.log("error",e),o(!1)})}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove bonus addresses"),l.a.createElement("p",null,"LIST OF ADDRESSES"),l.a.createElement(re.a,{value:S,language:"js",placeholder:'Please enter a json list (es. \n\t["ADDRESS1","ADDRESS2"...]\n)\n\t\t\t      \t',onChange:e=>T(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(i)return;d(!0);let e=[];try{e=JSON.parse(S)}catch(t){return void alert("INVALID LIST")}mt({address:e},s,n,e=>{d(!1),T("")},e=>{d(!1)})}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var Tt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(1),[C,b]=l.a.useState(5),[N,O]=l.a.useState(1),[A,y]=l.a.useState(5),[S,T]=l.a.useState(1e3),[k,R]=l.a.useState(1e3),[x,L]=l.a.useState(""),[D,w]=l.a.useState("");let{collection:j}=Object(H.g)();Object(H.f)();const[I,K]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-collection","remove-collection"],contract:window.STACKING_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add collection"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:_,id:"add_percentage",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_percentage"},"Bonus percentage (set 1 for 1%)")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:C,id:"daily",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"daily"},"Bonus daily step")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:S,id:"nft_n",onChange:e=>T(e.target.value)}),l.a.createElement(p.s,{for:"nft_n"},"Collection nft number")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:k,id:"max_rank",onChange:e=>R(e.target.value)}),l.a.createElement(p.s,{for:"max_rank"},"Max rank")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:N,id:"min",onChange:e=>O(e.target.value)}),l.a.createElement(p.s,{for:"min"},"Min nft reward")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:A,id:"max",onChange:e=>y(e.target.value)}),l.a.createElement(p.s,{for:"max"},"Max nft reward")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:x,id:"add_address",onChange:e=>L(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Contract")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),ut({contract:x,min:N,max:A,max_rank:k,collection_total:S,daily:C,percentage:_},s,n,e=>{o(!1),L(""),O(1),y(5),R(1e3),b(5),T(1e3),h(null),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove collection"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:D,id:"add_address",onChange:e=>w(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),Et({address:D},s,n,e=>{d(!1),w("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var kt=e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doOpenAuth:o}=Object(u.useConnect)();let{collection:i}=Object(H.g)();Object(H.f)();const[d,m]=l.a.useState([]),[g,f]=(window.STACKING_CONTRACT,l.a.useState(!0)),[v,_]=l.a.useState(0),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)return;c(!0);let a=50*(e-1),n=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.STACKING_CONTRACT+"/transactions?limit=50&unanchored=true";a>0&&(n+="&offset="+a),fetch(n).then(e=>e.json()).then(a=>{_(e),s(!0);console.log("txs",a),50!==a.results.length?f(!1):f(!0),t(a.results),c(!1)},e=>{s(!0),c(!1)})};l.a.useEffect(()=>{n||h(v+1,e=>m([...d,...e]))},[]);const C=e=>{switch(e){case"success":return"text-success";case"error":case"abort_by_response":return"text-danger";default:return""}};return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("h3",{className:"subtitle no-border"},"TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{await m([]),setTimeout(()=>h(1,e=>m([...e])),100)}},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d.map(e=>{var t,a;return l.a.createElement(p.b,{style:{marginBottom:12,borderRadius:5,background:"#fff",border:"none"},key:"tx_"+e.tx_id},l.a.createElement(p.c,null,l.a.createElement(p.f,{tag:"h5"},e.tx_id),l.a.createElement(p.d,{className:"mb-2 text-muted",tag:"h6"},l.a.createElement("span",{className:C(e.tx_status)},e.tx_status," ",e.is_unanchored?" (unanchored)":""),l.a.createElement("br",null),(a=e.parent_burn_block_time_iso,Le()(a).format("YYYY.MM.DD HH:mm:ss"))),l.a.createElement(p.e,null,l.a.createElement("b",null,e.tx_type),l.a.createElement("br",null),l.a.createElement("b",null,null===(t=e.contract_call)||void 0===t?void 0:t.function_name),e.contract_call?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"args_title"},"ARGS"),e.contract_call.function_args.map(e=>l.a.createElement("p",{className:"overflowed"},l.a.createElement("b",null,e.name,":")," ",e.repr))):null)))}),g&&!r?l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>h(v+1,e=>m([...d,...e]))},r?l.a.createElement(p.C,{size:"sm"}):"LOAD MORE"):null))};var Rt=se({route:"StackingMain",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1),[u,g]=l.a.useState(!1);return l.a.useEffect(()=>(t||(a(!0),it({address:r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},r,e=>{g(e)})),()=>a(!1)),[]),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:3,md:4,sm:6,xs:12,className:"bar-left-custom"},l.a.createElement("h3",{className:"subtitle"},"STAKING"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"BACK TO HOME"),u?l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"Stake")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(2),className:2===d?"current":""},"ADMIN ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(3),className:3===d?"current":""},"BONUS ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(4),className:4===d?"current":""},"COLLECTIONS")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(5),className:5===d?"current":""},"TXS"))))):l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0,toggleable:!1},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"Stake")))))),l.a.createElement(p.k,null,u?l.a.createElement("div",null,1==d?l.a.createElement(At,null):null,2==d?l.a.createElement(yt,null):null,3==d?l.a.createElement(St,null):null,4==d?l.a.createElement(Tt,null):null,5==d?l.a.createElement(kt,null):null):l.a.createElement(At,null))))});const xt=window.STACKING_CONTRACT_V2.split(".")[0],Lt=window.STACKING_CONTRACT_V2.split(".")[1];var Dt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:xt,contractName:Lt,functionName:"add-address-to-administrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},wt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:xt,contractName:Lt,functionName:"remove-address-from-adminstrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},jt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:xt,contractName:Lt,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},It=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null,percentage:null,daily:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{if(console.log("invio lista",e.address),e.address.length>200)return alert("Invalid list length > 200"),void(l&&l("Invalid list length"));let s=[];e.address.map(e=>s.push(Object(C.e)(e))),a({contractAddress:xt,contractName:Lt,functionName:"add-address-to-bonus",functionArgs:[Object(z.a)(s),Object(h.b)(e.percentage),Object(h.b)(e.daily)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Kt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{if(e.address.length>200)return alert("Invalid list length > 200"),void(l&&l("Invalid list length"));let s=[];e.address.map(e=>s.push(Object(C.e)(e))),a({contractAddress:xt,contractName:Lt,functionName:"remove-multiple-address-from-bonus",functionArgs:[Object(z.a)(s)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Wt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contract:null,min:null,max:null,collection_total:null,max_rank:null,daily:null,percentage:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:xt,contractName:Lt,functionName:"add-collection",functionArgs:[Object(C.a)(e.contract.split(".")[0],e.contract.split(".")[1]),Object(F.a)({"min-import":Object(h.b)(e.min),"max-import":Object(h.b)(e.max),"collection-total":Object(h.b)(e.collection_total),"max-rank":Object(h.b)(e.max_rank),"bonus-daily-step":Object(h.b)(e.daily),"bonus-percentage":Object(h.b)(e.percentage)})],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Ut=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contract:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:xt,contractName:Lt,functionName:"remove-collection",functionArgs:[Object(C.a)(e.contract.split(".")[0],e.contract.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Mt=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:xt,contractName:Lt,functionName:"full-collection-list",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},zt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stacking_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:xt,contractName:Lt,functionName:"get-staking-status",network:S.NETWORK,functionArgs:[Object(h.b)(e.stacking_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},Pt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:xt,contractName:Lt,functionName:"current-staking-ids",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},Ft=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{contract:null,nft_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r=[];const c=t.address,o=t.ctr_name,i=t.tkn,d=U.m.DoesNotOwn,m=Object(M.g)(c,o,i);r.push(Object(b.f)(a.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],d,m,Object(h.b)(e.nft_id))),n({contractAddress:xt,contractName:Lt,functionName:"stake",functionArgs:[Object(h.b)(e.nft_id),Object(C.a)(e.contract.split(".")[0],e.contract.split(".")[1])],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},postConditions:r,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:a.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}},Bt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stacking_id:null,nft_id:null,collection:null,token_name:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{console.log("claim",e);let s=[];a({contractAddress:xt,contractName:Lt,functionName:"claim",functionArgs:[Object(h.b)(e.stacking_id),Object(C.a)(e.collection.split(".")[0],e.collection.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},postConditions:s,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Gt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stacking_id:null,nft_id:null,collection:null,token_name:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{console.log("unstake",e);let s=[];const r=e.collection.split(".")[0],c=e.collection.split(".")[1],o=e.token_name,i=Object(M.g)(r,c,o);s.push(Object(b.f)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],U.m.Owns,i,Object(h.b)(e.nft_id))),s.push(Object(b.c)(xt,Lt,U.m.DoesNotOwn,i,Object(h.b)(e.nft_id))),a({contractAddress:xt,contractName:Lt,functionName:"unstake",functionArgs:[Object(h.b)(e.stacking_id),Object(C.a)(e.collection.split(".")[0],e.collection.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},postConditions:s,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Ht=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token_id:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e.token_id)try{let l=await Object(b.a)({contractAddress:a.address,contractName:a.ctr_name,functionName:"get-token-uri",network:S.NETWORK,functionArgs:[Object(h.b)(e.token_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});n&&n(Object(_.b)(l).value.value)}catch(s){l&&l(s)}};var Yt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(null),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(!1);return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{Ht({token_id:e.nft_id},s,{address:e.ctx.address,ctr_name:e.ctx.name},e=>{console.log("nft results",e),o(e)},e=>{console.log("err",e)})},300*e.n_el))},[]),c?l.a.createElement("div",{className:"stacking_avaible"},l.a.createElement(_e,{metadata_url:c.value}),l.a.createElement("div",{className:"button_container"},m?l.a.createElement(p.a,{color:"primary",disabled:!0,className:"main-btn",size:"lg",onClick:()=>{}},"STAKED"):l.a.createElement(p.a,{color:"primary",className:"main-btn",size:"lg",onClick:()=>{i||(d(!0),Ft({nft_id:e.nft_id,contract:e.ctx.address+"."+e.ctx.name},{address:e.ctx.address,ctr_name:e.ctx.name,tkn:e.ctx.token},s,n,e=>{console.log("res",e),g(!0),d(!1)},e=>{console.log("err",e),d(!1)}))}},i?l.a.createElement(p.C,null):l.a.createElement("b",null,"STAKE")))):null};var qt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState([]);return l.a.useEffect(()=>{if(!t){a(!0);let t=S.STACKS_API_BASE_URL+"/extended/v1/tokens/nft/holdings?principal="+s.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"&asset_identifiers="+e.collection.fullName;fetch(t).then(e=>e.json()).then(e=>{console.log("nfts",e),o(e.results)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,c.map((t,a,n)=>l.a.createElement(p.k,{xl:4,md:6,sm:12},l.a.createElement(Yt,{n_el:a,nft_id:parseInt(Object(_.b)(Object(we.i)(t.value.hex)).value),ctx:{address:e.collection.collection.split(".")[0],name:e.collection.collection.split(".")[1],token:e.collection.tokenName}})))))};const Xt=e=>parseFloat(e/1e6).toFixed(6);var Vt=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doContractCall:o}=Object(u.useConnect)(),{UserState:i,UserDispatch:d}=l.a.useContext(E),[m,g]=l.a.useState(null),[f,v]=l.a.useState(null),[_,h]=l.a.useState(!1),[C,b]=l.a.useState(null),[N,O]=l.a.useState(null);return l.a.useEffect(()=>{t||(a(!0),console.log("prendo nft",e),setTimeout(()=>{console.log("props.stacking_id.value",e.stacking_id.value),zt({stacking_id:e.stacking_id.value},i,t=>{console.log("minted results NFT ID: "+e.nft_id,t),v(t),O(t["nft-id"].value),b(t["nft-collection"].value),setTimeout(()=>{Ht({token_id:t["nft-id"].value},i,{address:t["nft-collection"].value.split(".")[0],ctr_name:t["nft-collection"].value.split(".")[1]},e=>{g(e)},e=>{console.log("err",e)})},1e3*e.n_el)},e=>{console.log("err",e)})},1e3*e.n_el))},[]),l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:4,md:6,sm:6},m?l.a.createElement(_e,{metadata_url:m.value}):null),l.a.createElement(p.k,{lg:8,md:6,sm:6},f?l.a.createElement("div",{className:"stacking_container white_content"},l.a.createElement("p",null,l.a.createElement("b",null,"EXPECTED DAILY GAIN:")," ",Xt(f["nft-daily-value"].value)," $ROMA"),l.a.createElement("p",null,l.a.createElement("b",null,"CURRENT GAIN:")," ",Xt(f.minted.value)," $ROMA"),l.a.createElement("p",null,l.a.createElement("b",null,"TIME BONUS*:")," ",Xt(f.bonus.value)," $ROMA ",l.a.createElement("br",null),"*Each 720 Blocks (about 5 days) you gain a 5% bonus on your total Reward ",l.a.createElement("br",null)),l.a.createElement("p",null,l.a.createElement("b",null,"OG BONUS**:")," ",Xt(f["address-bonus"].value)," $ROMA ",l.a.createElement("br",null),"**If you are an OG, each 144 Blocks (about 1 day) you gain a 2% bonus on your total Reward"),l.a.createElement("p",null,l.a.createElement("b",null,"ALREADY CLAIMED:")," ",Xt(f.claimed.value)," $ROMA"),_?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff",marginRight:12},className:"mb-3",size:"xs",onClick:async()=>{if(r)return;c(!0);let t="";Object.keys(e.contract_assets).map(e=>{e.split("::")[0]===C&&(t=e.split("::")[1])}),Bt({stacking_id:e.stacking_id.value,nft_id:N,collection:C,token_name:t},i,o,e=>{console.log("claim results",e),c(!1),h(!0)},e=>{console.log("err",e),c(!1)})}},r?l.a.createElement(p.C,{size:"sm"}):"CLAIM $ROMA"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{if(n)return;s(!0);let t="";Object.keys(e.contract_assets).map(e=>{e.split("::")[0]===C&&(t=e.split("::")[1])}),Gt({stacking_id:e.stacking_id.value,nft_id:N,collection:C,token_name:t},i,o,e=>{console.log("claim results",e),s(!1),h(!0)},e=>{console.log("err",e),s(!1)})}},n?l.a.createElement(p.C,{size:"sm"}):"UNSTAKE PUNK AND CLAIM $ROMA")),_?l.a.createElement("p",null,"CLAIMED"):null):null))};var Jt=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState([]),[m,g]=l.a.useState({});return l.a.useEffect(()=>{if(!t){a(!0),Pt({address:c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},c,e=>{d(e)},e=>{console.log("err",e)});let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.STACKING_CONTRACT_V2+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("balance",e),g(e.non_fungible_tokens)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{n||(s(!0),Pt({address:c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},c,e=>{console.log("stacking results",e),d(e),s(!1)},e=>{console.log("err",e),s(!1)}))}},n?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement("h3",{style:{color:"#fff"}},"You're staking ",i.length," Nfts"),i.map((e,t,a)=>l.a.createElement(Vt,{key:"stacking_"+t,stacking_id:e,n_el:t,contract_assets:m})))};var Zt=function(e){const t=Object(H.e)(),[a,n]=l.a.useState(!1),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(!1),{doContractCall:i}=Object(u.useConnect)(),{UserState:d,UserDispatch:m}=l.a.useContext(E),[g,f]=l.a.useState([]),[v,_]=l.a.useState([]),[h,C]=l.a.useState({});return l.a.useEffect(()=>{if(!a){n(!0),Mt({},d,e=>{console.log("result collections",e),_(e)},e=>{console.log("err",e)});let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("balance",e),C(e)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},window.STACKING?l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",marginBottom:"12px"},className:"mb-3",size:"lg",onClick:async()=>t.push("/staking")},l.a.createElement("b",null,"GO TO STAKING V1")):null),l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["claim","stake"],contract:window.STACKING_CONTRACT_V2})),l.a.createElement(p.k,{xl:6,md:8,sm:12},l.a.createElement("div",{className:"w_box"},l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{if(c)return;o(!0);let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("balance",e),C(e),o(!1)},e=>{console.log("err",e),o(!1)})}},c?l.a.createElement(p.C,{size:"sm"}):"Refresh balance"),l.a.createElement("p",null,l.a.createElement("b",null,"$ROMA BALANCE:")," ",(e=>{let t=0;return e.fungible_tokens&&Object.keys(e.fungible_tokens).map(a=>{a.split("::")[0]===window.TOKEN_CONTRACT&&(t=e.fungible_tokens[a].balance)}),parseFloat(t/1e6).toFixed(2)})(h)))),l.a.createElement(p.k,{xl:6,md:4,sm:12}),l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement("h3",{className:"subtitle",style:{marginTop:24}},"CURRENT STAKING")),l.a.createElement(Jt,null)),l.a.createElement(p.B,null,l.a.createElement(p.k,{xl:12},l.a.createElement("h2",{style:{color:"#fff"}},"Avaible nft to stake"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{s||(r(!0),Mt({},d,e=>{console.log("result collections",e),_(e),r(!1)},e=>{console.log("err",e),r(!1)}))}},s?l.a.createElement(p.C,{size:"sm"}):"Refresh collections"),l.a.createElement("div",{style:{marginTop:24}},((e,t)=>{if(!e.non_fungible_tokens||0===t.length)return[];let a=[];return Object.keys(e.non_fungible_tokens).map(e=>(t.find(t=>{var a,n;return(null===(a=t.value)||void 0===a||null===(n=a.collection)||void 0===n?void 0:n.value)===e.split("::")[0]})&&a.push({collection:e.split("::")[0],tokenName:e.split("::")[1],fullName:e}),!0)),a})(h,v).map(e=>l.a.createElement("div",null,l.a.createElement("h3",{className:"subtitle"},e.tokenName),l.a.createElement(qt,{collection:e}))))))))};var Qt=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(""),[C,b]=l.a.useState("");let{collection:N}=Object(H.g)();Object(H.f)();const[O,A]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-administrative","remove-address-from-adminstrative"],contract:window.STACKING_CONTRACT_V2})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),Dt({address:_},s,n,e=>{o(!1),h(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:C,id:"add_address",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),wt({address:C},s,n,e=>{d(!1),b("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var $t=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(null),[C,b]=l.a.useState(null),[N,O]=l.a.useState(!1),[A,y]=l.a.useState(""),[S,T]=l.a.useState("");let{collection:k}=Object(H.g)();Object(H.f)();const[R,x]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-bonus","remove-address-from-bonus","remove-multiple-address-from-bonus","set-bonus-percentage"],contract:window.STACKING_CONTRACT_V2})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add bonus addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_percentage",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_percentage"},"Bonus percentage (set to 100 for 1%)")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:C,id:"daily",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"daily"},"Daily step")),l.a.createElement("p",null,"ADD LIST OF ADDRESSES"),l.a.createElement(re.a,{value:A,language:"js",placeholder:'Please enter a json list (es. \n\t["ADDRESS1","ADDRESS2"...]\n)\n\t\t\t      \t',onChange:e=>y(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(c)return;o(!0);let e=[];try{e=JSON.parse(A),console.log("lists",e)}catch(t){return void alert("INVALID LIST")}It({address:e,percentage:_,daily:C},s,n,e=>{o(!1),y(""),h(null),b(null),console.log("add res",e)},e=>{console.log("error",e),o(!1)})}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove bonus addresses"),l.a.createElement("p",null,"LIST OF ADDRESSES"),l.a.createElement(re.a,{value:S,language:"js",placeholder:'Please enter a json list (es. \n\t["ADDRESS1","ADDRESS2"...]\n)\n\t\t\t      \t',onChange:e=>T(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(i)return;d(!0);let e=[];try{e=JSON.parse(S)}catch(t){return void alert("INVALID LIST")}Kt({address:e},s,n,e=>{d(!1),T("")},e=>{d(!1)})}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var ea=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(1),[C,b]=l.a.useState(5),[N,O]=l.a.useState(1),[A,y]=l.a.useState(5),[S,T]=l.a.useState(1e3),[k,R]=l.a.useState(1e3),[x,L]=l.a.useState(""),[D,w]=l.a.useState("");let{collection:j}=Object(H.g)();Object(H.f)();const[I,K]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-collection","remove-collection"],contract:window.STACKING_CONTRACT_V2})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add collection"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:_,id:"add_percentage",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_percentage"},"Bonus percentage (set 1 for 1%)")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:C,id:"daily",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"daily"},"Bonus daily step")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:S,id:"nft_n",onChange:e=>T(e.target.value)}),l.a.createElement(p.s,{for:"nft_n"},"Collection nft number")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:k,id:"max_rank",onChange:e=>R(e.target.value)}),l.a.createElement(p.s,{for:"max_rank"},"Max rank")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:N,id:"min",onChange:e=>O(e.target.value)}),l.a.createElement(p.s,{for:"min"},"Min nft reward")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{type:"number",value:A,id:"max",onChange:e=>y(e.target.value)}),l.a.createElement(p.s,{for:"max"},"Max nft reward")),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:x,id:"add_address",onChange:e=>L(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Contract")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),Wt({contract:x,min:N,max:A,max_rank:k,collection_total:S,daily:C,percentage:_},s,n,e=>{o(!1),L(""),O(1),y(5),R(1e3),b(5),T(1e3),h(null),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove collection"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:D,id:"add_address",onChange:e=>w(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),Ut({address:D},s,n,e=>{d(!1),w("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var ta=e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doOpenAuth:o}=Object(u.useConnect)();let{collection:i}=Object(H.g)();Object(H.f)();const[d,m]=l.a.useState([]),[g,f]=(window.STACKING_CONTRACT_V2,l.a.useState(!0)),[v,_]=l.a.useState(0),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)return;c(!0);let a=50*(e-1),n=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.STACKING_CONTRACT_V2+"/transactions?limit=50&unanchored=true";a>0&&(n+="&offset="+a),fetch(n).then(e=>e.json()).then(a=>{_(e),s(!0);console.log("txs",a),50!==a.results.length?f(!1):f(!0),t(a.results),c(!1)},e=>{s(!0),c(!1)})};l.a.useEffect(()=>{n||h(v+1,e=>m([...d,...e]))},[]);const C=e=>{switch(e){case"success":return"text-success";case"error":case"abort_by_response":return"text-danger";default:return""}};return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("h3",{className:"subtitle no-border"},"TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{await m([]),setTimeout(()=>h(1,e=>m([...e])),100)}},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d.map(e=>{var t,a;return l.a.createElement(p.b,{style:{marginBottom:12,borderRadius:5,background:"#fff",border:"none"},key:"tx_"+e.tx_id},l.a.createElement(p.c,null,l.a.createElement(p.f,{tag:"h5"},e.tx_id),l.a.createElement(p.d,{className:"mb-2 text-muted",tag:"h6"},l.a.createElement("span",{className:C(e.tx_status)},e.tx_status," ",e.is_unanchored?" (unanchored)":""),l.a.createElement("br",null),(a=e.parent_burn_block_time_iso,Le()(a).format("YYYY.MM.DD HH:mm:ss"))),l.a.createElement(p.e,null,l.a.createElement("b",null,e.tx_type),l.a.createElement("br",null),l.a.createElement("b",null,null===(t=e.contract_call)||void 0===t?void 0:t.function_name),e.contract_call?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"args_title"},"ARGS"),e.contract_call.function_args.map(e=>l.a.createElement("p",{className:"overflowed"},l.a.createElement("b",null,e.name,":")," ",e.repr))):null)))}),g&&!r?l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>h(v+1,e=>m([...d,...e]))},r?l.a.createElement(p.C,{size:"sm"}):"LOAD MORE"):null))};var aa=se({route:"StackingMain",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1),[u,g]=l.a.useState(!1);return l.a.useEffect(()=>(t||(a(!0),jt({address:r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},r,e=>{g(e)})),()=>a(!1)),[]),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:3,md:4,sm:6,xs:12,className:"bar-left-custom"},l.a.createElement("h3",{className:"subtitle"},"STAKING V2"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"BACK TO HOME"),u?l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"Stake")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(2),className:2===d?"current":""},"ADMIN ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(3),className:3===d?"current":""},"BONUS ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(4),className:4===d?"current":""},"COLLECTIONS")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(5),className:5===d?"current":""},"TXS"))))):l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0,toggleable:!1},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"Stake")))))),l.a.createElement(p.k,null,u?l.a.createElement("div",null,1==d?l.a.createElement(Zt,null):null,2==d?l.a.createElement(Qt,null):null,3==d?l.a.createElement($t,null):null,4==d?l.a.createElement(ea,null):null,5==d?l.a.createElement(ta,null):null):l.a.createElement(Zt,null))))});const na=window.RARITY_CONTRACT.split(".")[0],la=window.RARITY_CONTRACT.split(".")[1];var sa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:na,contractName:la,functionName:"add-address-to-administrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},ra=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:na,contractName:la,functionName:"remove-address-from-adminstrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},ca=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:na,contractName:la,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},oa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{values:[],collection:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=[];s=Object(z.a)(e.values.map(e=>Object(F.a)({"nft-id":Object(h.b)(parseInt(e.id)),rarity:Object(h.b)(parseInt(e["rarity point"])),rank:Object(h.b)(parseInt(e.rank))}))),console.log([s,Object(C.a)(e.collection.split(".")[0],e.collection.split(".")[1])]),a({contractAddress:na,contractName:la,functionName:"set-multiple-rarity",functionArgs:[s,Object(C.a)(e.collection.split(".")[0],e.collection.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}};var ia=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(""),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState("");let{collection:C}=Object(H.g)();Object(H.f)();const[b,N]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,null,l.a.createElement(Ze,{functions:["set-multiple-rarity"],contract:window.RARITY_CONTRACT}),l.a.createElement("h3",{className:"subtitle no-border"},"Add rarity points for collection (MAX 1000)"),l.a.createElement("p",{style:{color:"#fff"}},"Copy and paste a json array in the editor and then call the function"),l.a.createElement(re.a,{value:n,language:"js",placeholder:'Please enter a json list of metadata_url (es. \n\t[\n\t\t{"id":"1", "rarity point": "999", "rank": "1"},\n\t\t{"id":"2", "rarity point": "998", "rank": "2"},\n\t\t{"id":"3", "rarity point": "997", "rank": "3"}\n\t]\n)\n\t\t\t      \t',onChange:e=>s(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"STX Collection Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(i)return;let e=JSON.parse(n);d(!0),oa({values:e.splice(0,1e3),collection:_},c,r,e=>{d(!1),s(""),h(""),console.log("add res",e)},e=>{console.log("error",e),d(!1)})}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD LIST")))))};var da=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(""),[C,b]=l.a.useState("");let{collection:N}=Object(H.g)();Object(H.f)();const[O,A]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-administrative","remove-address-from-adminstrative"],contract:window.RARITY_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),sa({address:_},s,n,e=>{o(!1),h(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:C,id:"add_address",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),ra({address:C},s,n,e=>{d(!1),b("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var ma=e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doOpenAuth:o}=Object(u.useConnect)();let{collection:i}=Object(H.g)();Object(H.f)();const[d,m]=l.a.useState([]),[g,f]=(window.RARITY_CONTRACT,l.a.useState(!0)),[v,_]=l.a.useState(0),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)return;c(!0);let a=50*(e-1),n=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.RARITY_CONTRACT+"/transactions?limit=50&unanchored=true";a>0&&(n+="&offset="+a),fetch(n).then(e=>e.json()).then(a=>{_(e),s(!0);console.log("txs",a),50!==a.results.length?f(!1):f(!0),t(a.results),c(!1)},e=>{s(!0),c(!1)})};l.a.useEffect(()=>{n||h(v+1,e=>m([...d,...e]))},[]);const C=e=>{switch(e){case"success":return"text-success";case"error":case"abort_by_response":return"text-danger";default:return""}};return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("h3",{className:"subtitle no-border"},"TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{await m([]),setTimeout(()=>h(1,e=>m([...e])),100)}},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d.map(e=>{var t,a;return l.a.createElement(p.b,{style:{marginBottom:12,borderRadius:5,background:"#fff",border:"none"},key:"tx_"+e.tx_id},l.a.createElement(p.c,null,l.a.createElement(p.f,{tag:"h5"},e.tx_id),l.a.createElement(p.d,{className:"mb-2 text-muted",tag:"h6"},l.a.createElement("span",{className:C(e.tx_status)},e.tx_status," ",e.is_unanchored?" (unanchored)":""),l.a.createElement("br",null),(a=e.parent_burn_block_time_iso,Le()(a).format("YYYY.MM.DD HH:mm:ss"))),l.a.createElement(p.e,null,l.a.createElement("b",null,e.tx_type),l.a.createElement("br",null),l.a.createElement("b",null,null===(t=e.contract_call)||void 0===t?void 0:t.function_name),e.contract_call?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"args_title"},"ARGS"),e.contract_call.function_args.map(e=>l.a.createElement("p",{className:"overflowed"},l.a.createElement("b",null,e.name,":")," ",e.repr))):null)))}),g&&!r?l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>h(v+1,e=>m([...d,...e]))},r?l.a.createElement(p.C,{size:"sm"}):"LOAD MORE"):null))};var ua=se({route:"RarityMain",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1),[u,g]=l.a.useState(!1);return l.a.useEffect(()=>(t||(a(!0),ca({address:r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},r,e=>{g(e)})),()=>a(!1)),[]),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:3,md:4,sm:6,xs:12,className:"bar-left-custom"},l.a.createElement("h3",{className:"subtitle"},"RARITY CONTRACT INFO"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"BACK TO HOME"),u?l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0,toggleable:!1},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"ADD POINTS")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(2),className:2===d?"current":""},"ADMIN ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(3),className:3===d?"current":""},"TXS"))))):l.a.createElement("p",{style:{color:"#fff"}},"YOU CANNOT DO ANYTHING HERE")),l.a.createElement(p.k,null,u?l.a.createElement("div",null,1==d?l.a.createElement(ia,null):null,2==d?l.a.createElement(da,null):null,3==d?l.a.createElement(ma,null):null):l.a.createElement("p",{style:{color:"#fff"}},"YOU CANNOT DO ANYTHING HERE"))))});const Ea=window.TOKEN_CONTRACT.split(".")[0],ga=window.TOKEN_CONTRACT.split(".")[1];var fa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ea,contractName:ga,functionName:"add-address-to-administrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},va=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ea,contractName:ga,functionName:"remove-address-from-adminstrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},pa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ea,contractName:ga,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},_a=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ea,contractName:ga,functionName:"add-address-to-bonus",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},ha=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ea,contractName:ga,functionName:"remove-address-from-bonus",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Ca=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{percentage:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ea,contractName:ga,functionName:"set-bonus-percentage",network:S.NETWORK,functionArgs:[Object(h.b)(e.percentage)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},ba=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ea,contractName:ga,functionName:"add-address-to-minter",functionArgs:[Object(C.a)(e.address.split(".")[0],e.address.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Na=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ea,contractName:ga,functionName:"remove-address-from-minter",functionArgs:[Object(C.a)(e.address.split(".")[0],e.address.split(".")[1])],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},Oa=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Ea,contractName:ga,functionName:"get-current-supply",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},Aa=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Ea,contractName:ga,functionName:"get-current-divisor",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}};var ya=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(""),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState("");let{collection:C}=Object(H.g)();Object(H.f)();const[b,N]=l.a.useState([]),[O,A]=l.a.useState(0),[y,T]=l.a.useState(1);return l.a.useEffect(()=>{t||(a(!0),Oa({address:c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},c,e=>{A(parseFloat(e/1e6).toFixed(6))}),Aa({address:c.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},c,e=>{T(e)}))},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,null,l.a.createElement("h3",{className:"subtitle no-border"},"TOKEN INFO"),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,l.a.createElement("b",null,"TOTAL SUPPLY:")," ",O),l.a.createElement("p",null,l.a.createElement("b",null,"MAX SUPPLY:")," 21M"),l.a.createElement("p",null,l.a.createElement("b",null,"CURRENT DIVISOR:")," ",y)))))};var Sa=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(""),[C,b]=l.a.useState("");let{collection:N}=Object(H.g)();Object(H.f)();const[O,A]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-administrative","remove-address-from-adminstrative"],contract:window.TOKEN_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),fa({address:_},s,n,e=>{o(!1),h(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:C,id:"add_address",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),va({address:C},s,n,e=>{d(!1),b("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var Ta=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(null),[C,b]=l.a.useState(!1),[N,O]=l.a.useState(""),[A,y]=l.a.useState("");let{collection:S}=Object(H.g)();Object(H.f)();const[T,k]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-bonus","remove-address-from-bonus","set-bonus-percentage"],contract:window.TOKEN_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add bonus addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:N,id:"add_address",onChange:e=>O(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),_a({address:N},s,n,e=>{o(!1),O(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove bonus addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:A,id:"add_address",onChange:e=>y(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),ha({address:A},s,n,e=>{d(!1),y("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE"))),l.a.createElement(p.k,{sm:12},l.a.createElement("h3",{className:"subtitle no-border",style:{marginTop:40}},"Set bonus percentage"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_percentage",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_percentage"},"Bonus percentage (percentage is /100 - to set 1% set 100, to set 0.01% set 1)")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{C||(parseInt(_)<0||parseInt(_)>1e4?alert("INVALID VALUE (0-10000)"):(b(!0),Ca({percentage:parseInt(_)},s,n,e=>{b(!1),h(null)},e=>{b(!1)})))}},C?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var ka=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(""),[C,b]=l.a.useState("");let{collection:N}=Object(H.g)();Object(H.f)();const[O,A]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-minter","remove-address-from-minter"],contract:window.TOKEN_CONTRACT})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add minter addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),ba({address:_},s,n,e=>{o(!1),h(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove minter addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:C,id:"add_address",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),Na({address:C},s,n,e=>{d(!1),b("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var Ra=e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doOpenAuth:o}=Object(u.useConnect)();let{collection:i}=Object(H.g)();Object(H.f)();const[d,m]=l.a.useState([]),[g,f]=(window.TOKEN_CONTRACT,l.a.useState(!0)),[v,_]=l.a.useState(0),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)return;c(!0);let a=50*(e-1),n=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.TOKEN_CONTRACT+"/transactions?limit=50&unanchored=true";a>0&&(n+="&offset="+a),fetch(n).then(e=>e.json()).then(a=>{_(e),s(!0);console.log("txs",a),50!==a.results.length?f(!1):f(!0),t(a.results),c(!1)},e=>{s(!0),c(!1)})};l.a.useEffect(()=>{n||h(v+1,e=>m([...d,...e]))},[]);const C=e=>{switch(e){case"success":return"text-success";case"error":case"abort_by_response":return"text-danger";default:return""}};return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("h3",{className:"subtitle no-border"},"TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{await m([]),setTimeout(()=>h(1,e=>m([...e])),100)}},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d.map(e=>{var t,a;return l.a.createElement(p.b,{style:{marginBottom:12,borderRadius:5,background:"#fff",border:"none"},key:"tx_"+e.tx_id},l.a.createElement(p.c,null,l.a.createElement(p.f,{tag:"h5"},e.tx_id),l.a.createElement(p.d,{className:"mb-2 text-muted",tag:"h6"},l.a.createElement("span",{className:C(e.tx_status)},e.tx_status," ",e.is_unanchored?" (unanchored)":""),l.a.createElement("br",null),(a=e.parent_burn_block_time_iso,Le()(a).format("YYYY.MM.DD HH:mm:ss"))),l.a.createElement(p.e,null,l.a.createElement("b",null,e.tx_type),l.a.createElement("br",null),l.a.createElement("b",null,null===(t=e.contract_call)||void 0===t?void 0:t.function_name),e.contract_call?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"args_title"},"ARGS"),e.contract_call.function_args.map(e=>l.a.createElement("p",{className:"overflowed"},l.a.createElement("b",null,e.name,":")," ",e.repr))):null)))}),g&&!r?l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>h(v+1,e=>m([...d,...e]))},r?l.a.createElement(p.C,{size:"sm"}):"LOAD MORE"):null))};var xa=se({route:"TokenMain",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1),[u,g]=l.a.useState(!1);return l.a.useEffect(()=>(t||(a(!0),pa({address:r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},r,e=>{g(e)})),()=>a(!1)),[]),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:3,md:4,sm:6,xs:12,className:"bar-left-custom"},l.a.createElement("h3",{className:"subtitle"},"TOKEN CONTRACT INFO"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"BACK TO HOME"),u?l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"INFO")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(2),className:2===d?"current":""},"ADMIN ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(3),className:3===d?"current":""},"BONUS ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(4),className:4===d?"current":""},"MINTER CONTRACTS")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(5),className:5===d?"current":""},"TXS"))))):l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0,toggleable:!1},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"INFO")))))),l.a.createElement(p.k,null,u?l.a.createElement("div",null,1==d?l.a.createElement(ya,null):null,2==d?l.a.createElement(Sa,null):null,3==d?l.a.createElement(Ta,null):null,4==d?l.a.createElement(ka,null):null,5==d?l.a.createElement(Ra,null):null):l.a.createElement(ya,null))))});var La=e=>{const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(!1),{doOpenAuth:o}=Object(u.useConnect)();let{collection:i}=Object(H.g)();Object(H.f)();const[d,m]=l.a.useState([]),[g,f]=(window.BUY_TOKEN_CTX,l.a.useState(!0)),[v,_]=l.a.useState(0),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r)return;c(!0);let a=50*(e-1),n=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.BUY_TOKEN_CTX+"/transactions?limit=50&unanchored=true";a>0&&(n+="&offset="+a),fetch(n).then(e=>e.json()).then(a=>{_(e),s(!0);console.log("txs",a),50!==a.results.length?f(!1):f(!0),t(a.results),c(!1)},e=>{s(!0),c(!1)})};l.a.useEffect(()=>{n||h(v+1,e=>m([...d,...e]))},[]);const C=e=>{switch(e){case"success":return"text-success";case"error":case"abort_by_response":return"text-danger";default:return""}};return l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:12,md:12},l.a.createElement("h3",{className:"subtitle no-border"},"TRANSACTIONS"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>{await m([]),setTimeout(()=>h(1,e=>m([...e])),100)}},r?l.a.createElement(p.C,{size:"sm"}):"Refresh"),d.map(e=>{var t,a;return l.a.createElement(p.b,{style:{marginBottom:12,borderRadius:5,background:"#fff",border:"none"},key:"tx_"+e.tx_id},l.a.createElement(p.c,null,l.a.createElement(p.f,{tag:"h5"},e.tx_id),l.a.createElement(p.d,{className:"mb-2 text-muted",tag:"h6"},l.a.createElement("span",{className:C(e.tx_status)},e.tx_status," ",e.is_unanchored?" (unanchored)":""),l.a.createElement("br",null),(a=e.parent_burn_block_time_iso,Le()(a).format("YYYY.MM.DD HH:mm:ss"))),l.a.createElement(p.e,null,l.a.createElement("b",null,e.tx_type),l.a.createElement("br",null),l.a.createElement("b",null,null===(t=e.contract_call)||void 0===t?void 0:t.function_name),e.contract_call?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"args_title"},"ARGS"),e.contract_call.function_args.map(e=>l.a.createElement("p",{className:"overflowed"},l.a.createElement("b",null,e.name,":")," ",e.repr))):null)))}),g&&!r?l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>h(v+1,e=>m([...d,...e]))},r?l.a.createElement(p.C,{size:"sm"}):"LOAD MORE"):null))};const Da=window.BUY_TOKEN_CTX.split(".")[0],wa=window.BUY_TOKEN_CTX.split(".")[1];var ja={addAdminAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Da,contractName:wa,functionName:"add-address-to-administrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},removeAdminAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Da,contractName:wa,functionName:"remove-address-from-adminstrative",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},isAdmin:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Da,contractName:wa,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},addAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{principal:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Da,contractName:wa,functionName:"add_address_to_mint_event",functionArgs:[Object(C.e)(e.principal)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},addMultipleAddresses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{if(e.list.length>220)return alert("Invalid list length"),void(l&&l("Invalid list length"));let s=[];e.list.map(e=>s.push(Object(C.e)(e))),a({contractAddress:Da,contractName:wa,functionName:"add_multiple_addresses_to_mint_event",functionArgs:[Object(z.a)(s)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},removeAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{principal:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Da,contractName:wa,functionName:"remove_address_to_mint_event",functionArgs:[Object(C.e)(e.principal)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},emptyAddresses:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{t({contractAddress:Da,contractName:wa,functionName:"empty_whitelist",functionArgs:[],onFinish:e=>{a&&a(e)},onCancel:e=>{n&&n(e)},network:S.NETWORK,stxAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(l){n&&n(l)}},getWhiteListAddresses:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Da,contractName:wa,functionName:"whitelist_addresses",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},openMintEvent:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mint_price:0,public_value:0,address_mint:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=[Object(h.b)(e.mint_price),Object(h.b)(e.public_value),Object(h.b)(e.address_mint)];a({contractAddress:Da,contractName:wa,functionName:"open_mint_event",functionArgs:s,onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){console.log("error",s),l&&l(s)}},editMintEvent:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mint_price:0,public_value:0,address_mint:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=[Object(h.b)(e.mint_price),Object(h.b)(e.public_value),Object(h.b)(e.address_mint)];a({contractAddress:Da,contractName:wa,functionName:"edit_mint_event",functionArgs:s,onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},closeMintEvent:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{t({contractAddress:Da,contractName:wa,functionName:"close_mint_event",functionArgs:[],onFinish:e=>{a&&a(e)},onCancel:e=>{n&&n(e)},network:S.NETWORK,stxAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(l){n&&n(l)}},mintingResume:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Da,contractName:wa,functionName:"minting_resume",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},addCommissionCtx:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],amount:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{if(e.amount<1||e.amount>100)return void alert("Invalid percentage");let s=200,r=0,c=e.list,o=[];c.map(e=>{if(r==s)return;let t=e.split(".");t[1]?o.push(Object(C.a)(t[0],t[1])):o.push(Object(C.e)(t[0],t[1])),r++}),a({contractAddress:Da,contractName:wa,functionName:"add-address-to-commission",functionArgs:[Object(z.a)(o),Object(h.b)(e.amount)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},removeCommissionAddress:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=e.address.split("."),r=null;r=s[1]?Object(C.a)(s[0],s[1]):Object(C.e)(s[0],s[1]),a({contractAddress:Da,contractName:wa,functionName:"remove-address-from-commission",functionArgs:[r],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){l&&l(s)}},getCommissionAddresses:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Da,contractName:wa,functionName:"list-commission-addresses",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},currentMintEvent:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Da,contractName:wa,functionName:"current_mint_event",network:S.NETWORK,functionArgs:[...e],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value)}catch(l){n&&n(l)}},isOpenMinting:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Da,contractName:wa,functionName:"is_open_minting",network:S.NETWORK,functionArgs:[...e],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a("true"===Object(_.c)(n))}catch(l){n&&n(l)}},buy:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{amount:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{let r="buy",c=[];const o=Da,i=wa,d=U.j.LessEqual,m=parseInt(a);c.push(Object(b.g)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],d,m)),c.push(Object(b.d)(o,i,d,m)),n({contractAddress:Da,contractName:wa,functionName:r,functionArgs:[Object(h.b)(e.amount)],onFinish:e=>{l&&l(e)},onCancel:e=>{s&&s(e)},postConditions:c,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(r){s&&s(r)}}};const Ia=e=>{var t,a,n;return parseInt(null===(t=e.mint_event)||void 0===t||null===(a=t.value)||void 0===a||null===(n=a.mint_price)||void 0===n?void 0:n.value)||0},Ka=e=>{var t,a,n,l,s;return 0==(null===(t=e.mint_event)||void 0===t||null===(a=t.value["max-token"])||void 0===a?void 0:a.value)?99999999999999:parseInt((null===(n=e.mint_event)||void 0===n||null===(l=n.value["max-token"])||void 0===l?void 0:l.value)||0)-parseInt((null===(s=e.minted_tokens)||void 0===s?void 0:s.value)||0)},Wa=e=>{var t,a,n;return(null===(t=e.mint_event)||void 0===t||null===(a=t.value)||void 0===a||null===(n=a.is_open)||void 0===n?void 0:n.value)||!1},Ua=function(e){var t,a,n,l;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseInt((null===(t=e.balance)||void 0===t?void 0:t.value)||0)>parseInt((null===(a=e.mint_event)||void 0===a||null===(n=a.value)||void 0===n||null===(l=n.mint_price)||void 0===l?void 0:l.value)||0)*s||!1},Ma=e=>{var t;return(null===(t=e.can_mint_address)||void 0===t?void 0:t.value)||!1};var za=function(e){var t,a,n,s,r;const[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(!1),[f,v]=l.a.useState({}),{doContractCall:_}=Object(u.useConnect)(),{UserState:h,UserDispatch:C}=l.a.useContext(E),[b,N]=l.a.useState(!1),[O,A]=l.a.useState(1),[y,S]=l.a.useState(null),[T,k]=l.a.useState(!1),[R,x]=l.a.useState(!1);let{collection:L}=Object(H.g)();const D=Object(H.f)(),[w,j]=l.a.useState(0),[I,K]=l.a.useState([]),[W,U]=l.a.useState(!1),M=()=>{W||(U(!0),ja.mintingResume([],h,e=>{console.log("mint resume result",e),v(e),o(!0),U(!1)},e=>{o(!0),U(!1)}))};return l.a.useEffect(()=>{o(!1),M(),i||(N(!0),d(!0))},[L,D]),c?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"bg_black_el",style:{minHeight:100}},l.a.createElement(p.B,null,l.a.createElement(p.k,{lg:10,md:12,className:"offset-lg-1 offset-md-0"},l.a.createElement(Ze,{functions:["buy"],contract:window.BUY_TOKEN_CTX}),l.a.createElement("div",{className:"event_container"},l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff",margin:"12px auto",display:"block"},className:"mb-3",size:"xs",onClick:async()=>M()},W?l.a.createElement(p.C,{size:"sm"}):"Refresh"),l.a.createElement("p",null,"AVAIBLE TOKENS: ",l.a.createElement("b",null,(null===(t=f.mint_event)||void 0===t||null===(a=t.value["max-token"])||void 0===a?void 0:a.value)>0?de.format_stx_integers2(parseInt((null===(n=f.mint_event)||void 0===n||null===(s=n.value["max-token"])||void 0===s?void 0:s.value)||0)-parseInt((null===(r=f.minted_tokens)||void 0===r?void 0:r.value)||0)):"\u221e"," ")," "),l.a.createElement("p",{className:"big_text"},l.a.createElement(ie,{dim:36,style:{marginRight:6}})," BALANCE: ",l.a.createElement("span",{className:"currency"},(e=>{try{var t;return de.format_stx_integers2_with_pow(null===(t=e.balance)||void 0===t?void 0:t.value,6)+" STX"}catch(a){return"-"}})(f))),l.a.createElement("div",{className:"block_element"},(()=>{var e,t,a,n,s,r;return Ka(f)>0?Wa(f)?Ua(f,1)?Ma(f)&&(e=>Ua(e)&&Ma(e)&&Wa(e)||!1)(f)?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"mint_price"}," UNIT PRICE: ",l.a.createElement("b",null,(e=>{var t,a,n;return de.format_stx_integers(parseInt(null===(t=e.mint_event)||void 0===t||null===(a=t.value)||void 0===a||null===(n=a.mint_price)||void 0===n?void 0:n.value)||0)+" STX"})(f))),(null===(e=f.mint_event)||void 0===e||null===(t=e.value["max-token"])||void 0===t?void 0:t.value)?l.a.createElement("p",{className:"mint_price"}," MAX TOKEN ALLOWED:",l.a.createElement("b",null," ",parseInt(null===(a=f.mint_event)||void 0===a||null===(n=a.value["max-token"])||void 0===n?void 0:n.value)>0?de.format_stx_integers2(null===(s=f.mint_event)||void 0===s||null===(r=s.value["max-token"])||void 0===r?void 0:r.value):"\u221e")):null,b?l.a.createElement("div",{className:"w_box",style:{margin:"10px auto"}},l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{className:"to-mint-input",value:O,type:"number",id:"max_mint",min:1,style:{color:"#000"},onBlur:e=>{let t=Ka(f);parseInt(O)<1||isNaN(O)?A(1):1e6*parseInt(O)>t&&A(t/1e6)},onChange:e=>{A(parseInt(e.target.value))}}),l.a.createElement(p.s,{for:"max_mint",style:{color:"#000"}},"Select how much TOKEN to buy"))):null,Ia(f)>0?l.a.createElement("p",{className:"big_text"},"TOTAL PRICE: ",de.format_stx_integers(Ia(f)*O)):l.a.createElement("p",{className:"big_text"},"FREE MINTING"),l.a.createElement(p.a,{color:"danger",style:{color:"#fff"},size:"lg",className:"mt-3",onClick:async()=>{var e,t;if(T)return void console.log("claiming");k(!0);let a=parseInt(1e6*O);if((null===(e=f.mint_event)||void 0===e||null===(t=e.value["max-token"])||void 0===t?void 0:t.value)>0){let e=Ka(f);a>e?a=e:(isNaN(a)||a<1)&&(a=1)}ja.buy({amount:a},h,Ia(f)*O,_,e=>{console.log("res mint",e),k(!1),x(!0),A(1)},e=>{console.log("error",e),k(!1)})}},T?l.a.createElement(p.C,{color:"#000",size:"lg"}):l.a.createElement("b",null,"BUY TOKEN"))):l.a.createElement("p",{className:"text-danger"},"SORRY YOU CANNOT MINT"):l.a.createElement("p",{className:"text-danger"},"YOU DO NOT HAVE ENOUGH STX"):l.a.createElement("p",{className:"text-danger"},"MINT IS CLOSED"):l.a.createElement("p",{className:"text-danger"},"TOKENS ARE SOLD OUT")})())))))):l.a.createElement("div",{style:{minHeight:100,textAlign:"center"}},l.a.createElement(p.C,{color:"white"}))};var Pa=function(e){const[t,a]=l.a.useState(!1),{doContractCall:n}=Object(u.useConnect)(),{UserState:s,UserDispatch:r}=l.a.useContext(E),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0),[_,h]=l.a.useState(""),[C,b]=l.a.useState("");let{collection:N}=Object(H.g)();Object(H.f)();const[O,A]=l.a.useState([]);return l.a.useEffect(()=>{t||a(!0)},[]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-administrative","remove-address-from-adminstrative"],contract:window.BUY_TOKEN_CTX})),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Add administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:_,id:"add_address",onChange:e=>h(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{c||(o(!0),ja.addAdminAddress({address:_},s,n,e=>{o(!1),h(""),console.log("add res",e)},e=>{console.log("error",e),o(!1)}))}},c?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove administrative addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:C,id:"add_address",onChange:e=>b(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{i||(d(!0),ja.removeAdminAddress({address:C},s,n,e=>{d(!1),b("")},e=>{d(!1)}))}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")))))};var Fa=function(e){const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(""),{doContractCall:r}=Object(u.useConnect)(),{UserState:c,UserDispatch:o}=l.a.useContext(E),[i,d]=l.a.useState(!1),[m,g]=l.a.useState(0),[f,v]=l.a.useState(0);let{collection:_}=Object(H.g)();const h=Object(H.f)(),[C,b]=l.a.useState([]),[N,O]=l.a.useState(""),[A,y]=l.a.useState(!1),[S,T]=l.a.useState(0),[k,R]=l.a.useState([]),x=(e,t,a,n)=>{let l=e+t,s=a.slice(e,l);s.length>0?ja.addCommissionCtx({list:s,amount:n},c,r,e=>{v(l),a.length>l-1?setTimeout(()=>x(l,t,a,n),500):d(!1)},e=>{d(!1)}):d(!1)};return l.a.useEffect(()=>{t||(a(!0),ja.getCommissionAddresses([],c,e=>{R(e)}))},[_,h]),l.a.createElement("div",null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["add-address-to-commission"],contract:window.BUY_TOKEN_CTX})),l.a.createElement(p.k,{lg:6,md:12,className:""},C.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},C.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement("h3",{className:"subtitle"},"Add commission contracts"),l.a.createElement("p",{style:{color:"#fff"}},"Copy and paste a json array in the editor and then call the function"),i?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Process: ",f,"/",m)):l.a.createElement(re.a,{value:n,language:"js",placeholder:'Please enter a json list of metadata_url (es. \n\t[\n\t\t"address1", "address2"\n\t]\n)\n\t\t\t      \t',onChange:e=>s(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement("div",{style:{marginTop:24}},l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:S,type:"number",id:"max_mint",onChange:e=>T(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"Commission percentage"))),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{if(i)return;let e=JSON.parse(n);g(e.length),d(!0),x(0,200,e,S)}},i?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND ADD LIST"))),l.a.createElement(p.k,{lg:6,md:6,sm:12},l.a.createElement("h3",{className:"subtitle no-border"},"Remove commission addresses"),l.a.createElement(p.q,{floating:!0,style:{marginTop:24}},l.a.createElement(p.r,{value:N,id:"add_address",onChange:e=>O(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"Address")),l.a.createElement(p.a,{color:"primary",block:!0,style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{A||(y(!0),ja.removeCommissionAddress({address:N},c,r,e=>{y(!1),O("")},e=>{y(!1)}))}},A?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM AND REMOVE")),l.a.createElement("div",{style:{marginTop:56}},l.a.createElement(p.t,{type:"unstyled",className:""},k.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},l.a.createElement("span",null,e.value))))))))};var Ba=function(e){var t;const[a,n]=l.a.useState(!1),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(null),{doContractCall:i}=Object(u.useConnect)(),{UserState:d,UserDispatch:m}=l.a.useContext(E),[g,f]=l.a.useState(!1),[v,_]=l.a.useState(0),[h,C]=l.a.useState(0),[b,N]=l.a.useState(0),[O,A]=l.a.useState(!1),[y,S]=l.a.useState(!1);let{collection:T}=Object(H.g)();const k=Object(H.f)(),[R,x]=l.a.useState([]),L=()=>{s||(r(!0),ja.currentMintEvent([],d,e=>{console.log("-------------EVENT------------",e),a||n(!0),console.log("current",e),o(e),f(e.is_open.value),console.log("open"),_(parseFloat(e.mint_price.value/1e6).toFixed(2)),console.log("stx"),C(parseInt(e.public_value.value)),console.log("private"),N(parseInt(e.address_mint.value)),console.log("addrm"),r(!1)},e=>{a||n(!0),f(!1),r(!1)}))};return l.a.useEffect(()=>{L()},[T,k]),a?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["open_mint_event","close_mint_event","edit_mint_event"],contract:window.BUY_TOKEN_CTX})),l.a.createElement(p.k,{lg:6,md:12,className:"offset-lg-3 offset-md-0"},R.length>0&&l.a.createElement("div",{className:"pending"},l.a.createElement("h3",{className:"subtitle"},"Pending transactions"),l.a.createElement(p.t,{type:"unstyled"},R.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#a5a3a3"}},e.tx_id,l.a.createElement("br",null),l.a.createElement("b",null,e.contract_call.function_name))))),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>L()},s?l.a.createElement(p.C,{size:"sm"}):"Refresh"),c&&c.is_open.value?l.a.createElement("div",{className:"bg_black_el"},l.a.createElement("h3",null,"#",null===(t=c.id)||void 0===t?void 0:t.value),l.a.createElement("p",null,l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{fontSize:46}},l.a.createElement(ie,{dim:40,style:{marginRight:6}}),l.a.createElement("b",null,"STX:"),l.a.createElement("span",{className:"currency"},de.format_stx_integers(c.mint_price.value))),l.a.createElement("br",null)),l.a.createElement("b",null,"Public:")," ",0===parseInt(c.public_value.value)?"NO":"YES",l.a.createElement("br",null),l.a.createElement("b",null,"Max token delivery:")," ",parseInt(c["max-token"].value)),l.a.createElement(p.a,{color:"danger",style:{color:"#fff"},className:"mt-3",size:"lg",onClick:async()=>{y||(S(!0),ja.closeMintEvent({},d,i,e=>{S(!1)},e=>{S(!1)}))}},y?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CLOSE EVENT"))):null,l.a.createElement("div",{style:{height:24,width:"100%"}}),l.a.createElement("h3",{className:"subtitle"},c&&c.is_open.value?"Edit mint event":"Open mint event"),l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Fill in the form and confirm"),l.a.createElement(p.q,{floating:!0},l.a.createElement(oe.a,{decimalSeparator:".",groupSeparator:",",className:"form-control",id:"fee",value:v,onValueChange:(e,t)=>{_(e)}}),l.a.createElement(p.s,{for:"fee"},"STX Exchange RATE")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{type:"select",value:h,id:"import",onChange:e=>C(e.target.value)},l.a.createElement("option",{value:"1"},"Public"),l.a.createElement("option",{value:"0"},"Private")),l.a.createElement(p.s,{for:"import"},"Public/Private")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:b,type:"number",id:"max_mint",onChange:e=>N(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"MAX token delivery (will be multiplied by 1000000)")),l.a.createElement(p.a,{id:"confirm_open",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{let e=0,t="",a=(v||"0").split(".");if(console.log("splitted",a),t+=String(a[0]),a[1]){let e=String(a[1]);1==e.length&&(e+="0"),t+=e}else t+="00";if(e=parseInt(1e4*t),O)return;A(!0);let n="openMintEvent";c&&c.is_open.value&&(n="editMintEvent"),ja[n]({mint_price:e,public_value:h,address_mint:1e6*b},d,i,e=>{A(!1)},e=>{A(!1)})}},O?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm")))))):l.a.createElement(p.C,{color:"primary"})};var Ga=function(e){const{doContractCall:t}=Object(u.useConnect)(),{UserState:a,UserDispatch:n}=l.a.useContext(E),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(!1),[i,d]=l.a.useState(""),[m,g]=l.a.useState(""),[f,v]=l.a.useState(!1),[_,h]=l.a.useState(!1),[C,b]=l.a.useState(!1),[N,O]=l.a.useState(!1),[A,y]=l.a.useState([]);let{collection:S}=Object(H.g)();const T=Object(H.f)(),[k,R]=l.a.useState([]),x=()=>{N||(O(!0),ja.getWhiteListAddresses([],a,e=>{console.log("addresses",e),y(e),b(!0),O(!1)},e=>{console.log("errore",e),b(!0),O(!1)}))};return l.a.useEffect(()=>{C||(b(!0),x(),N||(O(!0),r(!0)))},[S,T]),l.a.createElement("div",null,l.a.createElement(p.k,{sm:12},l.a.createElement(Ze,{functions:["empty_whitelist","add_multiple_addresses_to_mint_event","add_address_to_mint_event","remove_address_to_mint_event","has_multiple_whitelist"],contract:window.BUY_TOKEN_CTX})),l.a.createElement(p.B,null,l.a.createElement(p.k,{md:12,lg:6},l.a.createElement("div",{className:"w_box"},l.a.createElement("p",null,"Add ",l.a.createElement("b",null,"single")," address to whitelist for mint events"),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:i,id:"add_address",onChange:e=>d(e.target.value)}),l.a.createElement(p.s,{for:"add_address"},"STX Address")),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",block:!0,onClick:async()=>{f||""==i.length||(v(!0),ja.addAddress({principal:i},a,t,e=>{v(!1),d("")},e=>{v(!1)}))}},f?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM"))),s?l.a.createElement("div",{className:"w_box",style:{marginTop:36}},l.a.createElement("p",null,"Add ",l.a.createElement("b",null,"multiple")," addresses to whitelist for mint events"),l.a.createElement(re.a,{value:c,language:"js",placeholder:'Please enter a json list of principals (es. \n\t[\n\t\t"ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM",\n\t\t"ST1SJ3DTE5DN7X54YDH5D64R3BCB6A2AG2ZQ8YPD5"\n\t]\n)',onChange:e=>o(e.target.value),padding:15,minHeight:350,style:{backgroundColor:"#f5f5f5"}}),l.a.createElement(p.a,{id:"confirm_add_multiple",color:"primary",style:{color:"#fff",marginTop:12},className:"mb-3",size:"lg",block:!0,onClick:async()=>{let e=[];try{e=JSON.parse(c)}catch(n){return void alert("Invalid addresses list")}f||0==e.length||(v(!0),ja.addMultipleAddresses({list:e},a,t,e=>{v(!1),o("")},e=>{v(!1)}))}},f?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"CONFIRM"))):null),l.a.createElement(p.k,{md:12,lg:6},l.a.createElement("h3",{className:"subtitle"},"Addresses"),l.a.createElement(p.a,{id:"confirm_add",color:"primary",style:{color:"#fff"},className:"mb-3",size:"xs",onClick:async()=>x()},N?l.a.createElement(p.C,{size:"sm"}):"Refresh"),s?l.a.createElement(p.a,{id:"remove_all",color:"danger",style:{color:"#fff",marginLeft:12},className:"mb-3",size:"xs",onClick:async()=>{ja.emptyAddresses({},a,t,e=>{h(!1),o("")},e=>{h(!1)})}},_?l.a.createElement(p.C,{size:"sm"}):"Remove all"):null,l.a.createElement(p.t,{type:"unstyled",className:"addresses_list"},A.map((e,n,s)=>l.a.createElement("li",{key:"list_a_"+n,style:{color:"#a5a3a3"}},l.a.createElement(p.a,{disabled:_,close:!0,onClick:()=>{_||(h(!0),ja.removeAddress({principal:e.value},a,t,e=>{h(!1)},e=>{h(!1)}))}}),l.a.createElement("span",null,e.value)))))))};var Ha=se({route:"TokenMain",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},e=>{const[t,a]=l.a.useState(!1),[n,s]=l.a.useState(!1),{UserState:r,UserDispatch:c}=l.a.useContext(E);let{collection:o}=Object(H.g)();const i=Object(H.e)(),[d,m]=l.a.useState(1),[u,g]=l.a.useState(!1);return l.a.useEffect(()=>(t||(a(!0),pa({address:r.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},r,e=>{g(e)})),()=>a(!1)),[]),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(p.B,{style:{overflow:"visible"}},l.a.createElement(p.k,{lg:3,md:4,sm:6,xs:12,className:"bar-left-custom"},l.a.createElement("h3",{className:"subtitle"},"BUY ROMA"),l.a.createElement(p.a,{id:"back_to_home",color:"primary",style:{color:"#fff",margin:"12px 0",display:"block"},className:"mb-3",size:"xs",onClick:async()=>i.push("/")},"BACK TO HOME"),u?l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"MINT")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(2),className:2===d?"current":""},"ADMIN ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(3),className:3===d?"current":""},"COMMISSION ADDRESSES")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(4),className:4===d?"current":""},"MINT EVENT")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(5),className:5===d?"current":""},"WHITELIST")),l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(6),className:6===d?"current":""},"TXS"))))):l.a.createElement("div",{className:"vertical_nav"},l.a.createElement(p.A,{color:"faded",light:!0,toggleable:!1},l.a.createElement(p.x,{navbar:!0},l.a.createElement(p.y,null,l.a.createElement(p.z,{onClick:()=>m(1),className:1===d?"current":""},"INFO")))))),l.a.createElement(p.k,null,u?l.a.createElement("div",null,1==d?l.a.createElement(za,null):null,2==d?l.a.createElement(Pa,null):null,3==d?l.a.createElement(Fa,null):null,4==d?l.a.createElement(Ba,null):null,5==d?l.a.createElement(Ga,null):null,6==d?l.a.createElement(La,null):null):l.a.createElement(za,null))))});const Ya=window.STAKING_TOKEN_CONTRACT.split(".")[0],qa=window.STAKING_TOKEN_CONTRACT.split(".")[1];var Xa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"is-admin",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(1===parseInt(Object(_.b)(n).value.value))}catch(l){n&&n(l)}},Va=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{amount:0},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{console.log(e);let s=[];s.push(Object(b.g)(t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],U.j.GreaterEqual,e.amount)),a({contractAddress:Ya,contractName:qa,functionName:"fund",functionArgs:[Object(h.b)(e.amount)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,postConditions:s,postConditionMode:U.o.Deny,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){console.log("e",s),l&&l(s)}},Ja=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"get-net-current-height",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},Za=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"ctx-cycles-ids",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},Qa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cycle_id:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"get-staking-status",network:S.NETWORK,functionArgs:[Object(h.b)(e.cycle_id)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},$a=async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let a=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"get-extimated-current-total-gain",network:S.NETWORK,functionArgs:[],senderAddress:e.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});t&&t(Object(_.b)(a).value.value)}catch(n){a&&a(n)}},en=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"can-delegate",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},tn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"can-undelegate",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},an=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"address-balance",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},nn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{let n=await Object(b.a)({contractAddress:Ya,contractName:qa,functionName:"is-staking-address",network:S.NETWORK,functionArgs:[Object(C.e)(e.address)],senderAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]});a&&a(Object(_.b)(n).value.value)}catch(l){n&&n(l)}},ln=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cycle_id:null,number_of_cycles:null,amount:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=[];const r=t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],c=U.j.GreaterEqual,o=parseInt(e.amount),i=window.STAKING_TOKEN_CTX.split(".")[0],d=window.STAKING_TOKEN_CTX.split(".")[1],m=Object(M.g)(i,d,window.STAKING_TOKEN_NAME),u=Object(b.e)(r,c,o,m);console.log("standardFungiblePostCondition",u),s.push(u),a({contractAddress:Ya,contractName:qa,functionName:"delegate-token",functionArgs:[Object(h.b)(e.cycle_id),Object(h.b)(e.number_of_cycles),Object(h.b)(e.amount)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},postConditions:s,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){console.log("e",s),l&&l(s)}},sn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null,amount:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{let s=[];if(e.amount>0){const t=window.STAKING_TOKEN_CONTRACT.split(".")[0],a=window.STAKING_TOKEN_CONTRACT.split(".")[1],n=U.j.GreaterEqual,l=parseInt(e.amount),r=window.STAKING_TOKEN_CTX.split(".")[0],c=window.STAKING_TOKEN_CTX.split(".")[1],o=Object(M.g)(r,c,window.STAKING_TOKEN_NAME),i=Object(b.b)(t,a,n,l,o);console.log("contractFungiblePostCondition",i),s.push(i)}a({contractAddress:Ya,contractName:qa,functionName:"undelegate",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},postConditions:s,postConditionMode:U.o.Deny,network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){console.log("e",s),l&&l(s)}},rn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{address:null},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;try{a({contractAddress:Ya,contractName:qa,functionName:"stop-staking-till-next",functionArgs:[Object(C.e)(e.address)],onFinish:e=>{n&&n(e)},onCancel:e=>{l&&l(e)},network:S.NETWORK,stxAddress:t.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]})}catch(s){console.log("e",s),l&&l(s)}};const cn=e=>parseFloat(e/1e6).toFixed(2);var on=se({route:"MainStakingToken",hasHeader:!1,hide_nav:!0,hasSecondaryHeader:!0},(function(e){const t=Object(H.e)(),[a,n]=l.a.useState(!1),[s,r]=l.a.useState(!1),[c,o]=l.a.useState(!1),{doContractCall:i}=Object(u.useConnect)(),{UserState:d,UserDispatch:m}=l.a.useContext(E),[g,f]=l.a.useState([]),[v,_]=l.a.useState(0),[h,C]=l.a.useState(0),[b,N]=l.a.useState({"current-stake-cycle-id":{value:null},"next-stake-cycle-id":{value:null},"stake-cycle-id":{value:null}}),[O,A]=l.a.useState({addresses:{type:"uint",value:"0"},"end-block-height":{type:"uint",value:"0"},"open-registration":{type:"bool",value:!0},released:{type:"bool",value:!1},"stacks-ctx-percentage":{type:"uint",value:"0"},"start-block-height":{type:"uint",value:"0"},"total-staked":{type:"uint",value:"0"}}),[y,T]=l.a.useState({addresses:{type:"uint",value:"0"},"end-block-height":{type:"uint",value:"0"},"open-registration":{type:"bool",value:!0},released:{type:"bool",value:!1},"stacks-ctx-percentage":{type:"uint",value:"0"},"start-block-height":{type:"uint",value:"0"},"total-staked":{type:"uint",value:"0"}}),[k,R]=l.a.useState(!1),[x,L]=l.a.useState(!1),[D,w]=l.a.useState({stx:{type:"uint",value:"0"},token:{type:"uint",value:"0"}}),[j,I]=l.a.useState({"is-staking":{type:"bool",value:!1},"staking-data":{type:"(optional none)",value:null}}),[K,W]=l.a.useState(0),[U,M]=l.a.useState(!1),[z,P]=l.a.useState(0),[F,B]=l.a.useState(!1),[G,Y]=l.a.useState(0),[q,X]=l.a.useState(!1),[V,J]=l.a.useState(!1),[Z,Q]=l.a.useState(1),[$,ee]=l.a.useState(!1);return l.a.useEffect(()=>{if(!a){n(!0);let e=S.STACKS_API_BASE_URL+"/extended/v1/address/"+window.STAKING_TOKEN_CONTRACT+"/balances";fetch(e).then(e=>e.json()).then(e=>{console.log("CONTRACT BALANCE",e.stx.balance),_(e.stx.balance)},e=>{console.log("err",e)}),Xa({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},d,e=>{console.log("IS ADMON",e),M(e)},e=>{console.log("err",e)}),$a({},d,e=>{console.log("GAIN",e),C(e)},e=>{console.log("err",e)}),Za({},d,e=>{console.log("IDXS",e),N(e),Qa({cycle_id:parseInt(e["current-stake-cycle-id"].value)},d,e=>{console.log("CURRENT STAKING",e),A(e)},e=>{console.log("err",e)}),Qa({cycle_id:parseInt(e["next-stake-cycle-id"].value)},d,e=>{console.log("NEXT STAKING",e),T(e)},e=>{console.log("err",e)})},e=>{console.log("err",e)}),en({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},d,e=>{console.log("CAN DELEGATE",e),R(e)},e=>{console.log("err",e)}),tn({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},d,e=>{console.log("CAN UNDELEGATE",e),L(1==e)},e=>{console.log("err",e)}),nn({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},d,e=>{console.log("IS STAKING",e),I(e)},e=>{console.log("err",e)}),an({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},d,e=>{console.log("ADDRESS BALANCE",e),w(e)},e=>{console.log("err",e)}),Ja({},d,e=>{console.log("CURRENT HEIGHT",e),W(e)},e=>{console.log("err",e)})}},[]),l.a.createElement("div",null,l.a.createElement(p.a,{id:"back_to_home",color:"danger",style:{color:"#fff",marginBottom:"12px"},className:"mb-3",size:"lg",onClick:async()=>t.push("/")},l.a.createElement("b",null,"BACK TO HOME")),l.a.createElement(Ze,{functions:["fund","delegate-token","undelegate","stop-staking-till-next"],contract:window.STAKING_TOKEN_CONTRACT}),l.a.createElement(p.B,null,l.a.createElement(p.k,{xl:4,md:12,sm:12,style:{marginTop:12}},l.a.createElement("h3",{className:"subtitle no-border",style:{marginTop:24}},"INFO"),l.a.createElement("div",{className:"w_box"},l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{fontSize:39,fontWeight:"bold"}},"STX"),l.a.createElement("br",null),l.a.createElement("span",{style:{fontWeight:900,color:"#aaaaaa",position:"relative",top:-10}},"COMMUNITY TREASURY")),l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{lineHeight:"70px",fontSize:22}},cn(parseInt(v))))),l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{fontSize:39,fontWeight:"bold"}},"ROMA"),l.a.createElement("br",null),l.a.createElement("span",{style:{fontWeight:900,color:"#aaaaaa",position:"relative",top:-10}},"IN YOUR WALLET")),l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{lineHeight:"70px",fontSize:22}},cn(parseInt(D.token.value))))),l.a.createElement("p",null,l.a.createElement("b",null,"CURRENT BLOCK: ",K)),U?l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("b",null,"FUND THE CONTRACT"),l.a.createElement(p.q,{floating:!0},l.a.createElement(oe.a,{decimalSeparator:".",groupSeparator:",",className:"form-control",id:"fee",value:z,onValueChange:(e,t)=>{P(e)}}),l.a.createElement(p.s,{for:"fee"},"STX funds")),l.a.createElement(p.a,{id:"fund_account",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{let e="",t=(z||"0").split(".");if(console.log("splitted",t),e+=String(t[0]),t[1]){let a=String(t[1]);1==a.length&&(a+="0"),e+=a}else e+="00";let a=parseInt(1e4*e);F||(B(!0),Va({amount:a},d,i,e=>{B(!1)},e=>{B(!1)}))}},F?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"Confirm"))):null)),l.a.createElement(p.k,{xl:4,md:6,sm:12,style:{marginTop:12}},l.a.createElement("h3",{className:"subtitle no-border",style:{marginTop:24}},"CURRENT CYCLE"),parseInt(O["start-block-height"].value)>0?l.a.createElement("div",{className:"w_box"},l.a.createElement("h3",null,l.a.createElement("b",null,"#",b["current-stake-cycle-id"].value)),l.a.createElement("p",null,l.a.createElement("b",null,"START BLOCK: ",O["start-block-height"].value),l.a.createElement("br",null),l.a.createElement("b",null,"END BLOCK: ",O["end-block-height"].value)),l.a.createElement("p",null,K>=parseInt(O["start-block-height"].value)&&K<=parseInt(O["end-block-height"].value)?l.a.createElement("b",{className:"text-danger"},"RUNNING"):l.a.createElement(l.a.Fragment,null,parseInt(O["start-block-height"].value)>parseInt(K)&&1==O["open-registration"].value?l.a.createElement("b",{className:"text-success"},"STAKING REGISTRATIONS ARE OPEN"):l.a.createElement("b",null,"CLOSED"),console.log("registration",O["open-registration"]))),l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{fontSize:39,fontWeight:"bold"}},"STX"),l.a.createElement("br",null),l.a.createElement("span",{style:{fontWeight:900,color:"#aaaaaa",position:"relative",top:-10}},"TREASURY CYCLE DISTRIBUTION")),l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{lineHeight:"70px",fontSize:22}},cn(parseInt(h))))),l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{fontSize:39,fontWeight:"bold"}},"ROMA"),l.a.createElement("br",null),l.a.createElement("span",{style:{fontWeight:900,color:"#aaaaaa",position:"relative",top:-10}},"TOTAL ROMA STAKED")),l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{lineHeight:"70px",fontSize:22}},cn(parseInt(O["total-staked"].value))))),j["is-staking"].value?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{fontSize:39,fontWeight:"bold"},className:"text-success"},"ROMA"),l.a.createElement("br",null),l.a.createElement("span",{style:{fontWeight:900,color:"#aaaaaa",position:"relative",top:-10}},"YOUR STAKED ROMA")),l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{lineHeight:"70px",fontSize:22}},cn(parseInt(j["staking-data"].value.value.amount.value))))),l.a.createElement(p.B,null,l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{fontSize:39,fontWeight:"bold"},className:"text-success"},"STX"),l.a.createElement("br",null),l.a.createElement("span",{style:{fontWeight:900,color:"#aaaaaa",position:"relative",top:-10}},"EXPECTED GAIN")),l.a.createElement(p.k,{xs:6},l.a.createElement("span",{style:{lineHeight:"70px",fontSize:22}},cn(parseInt(h)/parseInt(parseInt(O["total-staked"].value)/parseInt(j["staking-data"].value.value.amount.value))))))):null,k&&!$?l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"STAKE ROMA"),l.a.createElement(p.q,{floating:!0},l.a.createElement(oe.a,{decimalSeparator:".",groupSeparator:",",className:"form-control",id:"fee",value:G,onValueChange:(e,t)=>{Y(e)}}),l.a.createElement(p.s,{for:"fee"},"ROMA amount")),l.a.createElement(p.q,{floating:!0},l.a.createElement(p.r,{value:Z,type:"number",id:"max_mint",onChange:e=>Q(e.target.value)}),l.a.createElement(p.s,{for:"max_mint"},"Number of cycles")),l.a.createElement(p.a,{id:"fund_account",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{let e="",t=G||"0";t=t.replace(/,/g,"");let a=t.split(".");if(console.log("splitted",a),e+=String(a[0]),a[1]){let t=String(a[1]);1==t.length&&(t+="0"),e+=t}else e+="00";let n=parseInt(1e4*e);n<=0||n>parseInt(D.token.value)?alert("INVALID VALUE"):q||(X(!0),ln({cycle_id:parseInt(b["current-stake-cycle-id"].value),number_of_cycles:Z,amount:n},d,i,e=>{X(!1),ee(!0)},e=>{X(!1)}))}},q?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"STAKE ROMA"))):null,x?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{id:"fund_account",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{if(q)return;X(!0);let e=0;try{e=parseInt(j["staking-data"].value.value.amount.value)}catch(t){}sn({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER],amount:e},d,i,e=>{X(!1)},e=>{X(!1)})}},q?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"UNSTAKE ROMA")),"* Only before the start of this 1st Cycle, your ROMA will be returned immediately",l.a.createElement("br",null),"Afterwards the Unstake will return your ROMA after the End of the Cycle"):null,!x&&j["is-staking"].value?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("br",null)),l.a.createElement(p.a,{id:"fund_account",block:!0,color:"primary",style:{color:"#fff"},className:"mb-3",size:"lg",onClick:async()=>{V||(J(!0),rn({address:d.userData.profile.stxAddress[S.SELECTED_NETWORK_CALLER]},d,i,e=>{J(!1)},e=>{J(!1)}))}},V?l.a.createElement(p.C,{size:"sm"}):l.a.createElement("b",null,"STOP STAKING ROMA*")),l.a.createElement("small",null,"* This will take effect at the end of current cycle")):null):null),l.a.createElement(p.k,{xl:4,md:12,sm:12,style:{marginTop:12}},l.a.createElement("h3",{className:"subtitle no-border",style:{marginTop:24}},"NEXT CYCLE"),l.a.createElement("div",{className:"w_box"},l.a.createElement("h3",null,l.a.createElement("b",null,"#",parseInt(b["current-stake-cycle-id"].value)+1)),l.a.createElement("p",null,l.a.createElement("b",null,"START BLOCK: ",y["start-block-height"].value),l.a.createElement("br",null),l.a.createElement("b",null,"END BLOCK: ",y["end-block-height"].value))))))}));a(236),a(368);function dn(e){const{UserState:t,UserDispatch:a}=l.a.useContext(E),[n,s]=l.a.useState(!1),[r,c]=l.a.useState(null);return l.a.useEffect(()=>{if(!n)if(s(!0),d.isSignInPending())d.handlePendingSignIn().then(e=>{window.history.replaceState({},document.title,"/"),a({type:"update",obj:{logged:!0,userData:e}})});else if(d.isUserSignedIn()){let e=d.loadUserData();a({type:"update",obj:{logged:!0,userData:e}})}}),l.a.createElement(u.Connect,{authOptions:m},l.a.createElement(Y.a,null,l.a.createElement(mn,null)),l.a.createElement(p.u,{size:"xl",className:"bd-example-modal-lg",isOpen:t.openModal},l.a.createElement(p.w,{toggle:()=>a({type:"close_modal"})},t.modalContent.name),l.a.createElement(p.v,null,l.a.createElement(p.B,null,l.a.createElement(p.k,{md:6,sm:12},t.modalContent.image?l.a.createElement(l.a.Fragment,null,-1!==de.video_mime_type.indexOf(t.modalContent.image_type||"image")?l.a.createElement("video",{style:{width:"100%"},className:"video",autoPlay:!0,loop:!0,muted:!0},l.a.createElement("source",{src:de.ipfs_gateway(t.modalContent.image),type:"video/mp4"})):l.a.createElement("img",{style:{width:"100%"},src:de.ipfs_gateway(t.modalContent.image)})):null),l.a.createElement(p.k,{md:6,sm:12},l.a.createElement("h3",{className:"subtitle",style:{marginTop:24}},"DESCRIPTION"),t.modalContent.description,t.modalContent["rarity point"]?l.a.createElement("span",{style:{display:"block"}},l.a.createElement("b",null,"Rarity:")," ",t.modalContent["rarity point"]):null,t.modalContent.rank?l.a.createElement("span",{style:{display:"block"}},l.a.createElement("b",null,"Rank:")," ",t.modalContent.rank):null,t.modalContent.Rank?l.a.createElement("span",{style:{display:"block"}},l.a.createElement("b",null,"Rank:")," ",t.modalContent.Rank):null,t.modalContent["Rank Points Bonus"]?l.a.createElement("span",{style:{display:"block"}},l.a.createElement("b",null,"Rank Points Bonus:")," ",t.modalContent["Rank Points Bonus"]):null,t.modalContent.attributes&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"subtitle no-border",style:{marginTop:24}},"TRAITS"),l.a.createElement(p.t,{type:"unstyled",style:{marginTop:12}},t.modalContent.attributes.map((e,t,a)=>l.a.createElement("li",{key:"list_a_"+t,style:{color:"#fff"}},l.a.createElement("b",null,e.trait_type),": ",e.value)))))))))}function mn(){return function(){const{UserState:e,UserDispatch:t}=l.a.useContext(E),[a,n]=l.a.useState(!1);let s=Object(H.f)(),{collection:r}=Object(H.g)();return l.a.useEffect(()=>{console.log("loc",s),e.logged||"/"===s.pathname||s.pathname.match(/gallery/)?n(!0):(n(!1),window.location="/")},[s]),a}()?l.a.createElement(l.a.Fragment,null,l.a.createElement(H.a,{exact:!0,path:"/",component:Ke}),l.a.createElement(H.a,{exact:!0,path:"/tokenstaking",component:on}),l.a.createElement(H.a,{exact:!0,path:"/upgrade",component:lt}),l.a.createElement(H.a,{exact:!0,path:"/staking",component:Rt}),l.a.createElement(H.a,{exact:!0,path:"/stakingv2",component:aa}),l.a.createElement(H.a,{exact:!0,path:"/rarity",component:ua}),l.a.createElement(H.a,{exact:!0,path:"/token",component:xa}),l.a.createElement(H.a,{exact:!0,path:"/buytoken",component:Ha}),l.a.createElement(H.a,{exact:!0,path:"/:collection/tokens",component:We}),l.a.createElement(H.a,{exact:!0,path:"/:collection/packages",component:Ue}),l.a.createElement(H.a,{exact:!0,path:"/:collection/commission",component:Fe}),l.a.createElement(H.a,{exact:!0,path:"/:collection/gallery",component:Me}),l.a.createElement(H.a,{exact:!0,path:"/:collection/mint",component:Re}),l.a.createElement(H.a,{exact:!0,path:"/:collection/nft",component:je}),l.a.createElement(H.a,{exact:!0,path:"/:collection/whitelist",component:ce}),l.a.createElement(H.a,{exact:!0,path:"/:collection/event",component:me}),l.a.createElement(H.a,{exact:!0,path:"/:collection/txs",component:De}),l.a.createElement(H.a,{exact:!0,path:"/:collection/add",component:ue}),l.a.createElement(H.a,{exact:!0,path:"/:collection/meta",component:ze}),l.a.createElement(H.a,{exact:!0,path:"/:collection/rarity",component:Pe})):null}console.log=()=>{},console.error=()=>{},console.debug=()=>{};var un=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(ve,null,l.a.createElement(v,null,l.a.createElement(dn,null))),l.a.createElement(Q.NotificationContainer,null))};var En=e=>{e&&e instanceof Function&&a.e(6).then(a.bind(null,1130)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:s,getTTFB:r}=t;a(e),n(e),l(e),s(e),r(e)})};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(un,null)),document.getElementById("root")),En()},314:function(e,t){},391:function(e,t,a){e.exports=a(1104)},396:function(e,t,a){},398:function(e,t,a){e.exports=a.p+"static/media/logo.06e73328.svg"},399:function(e,t,a){},403:function(e,t){},409:function(e,t){},433:function(e,t){},444:function(e,t){},446:function(e,t){},452:function(e,t){},454:function(e,t){},537:function(e,t){},539:function(e,t){},546:function(e,t){},547:function(e,t){},653:function(e,t){},654:function(e,t,a){var n={"./connect-modal.entry.js":[1106,4]};function l(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],l=t[0];return a.e(t[1]).then((function(){return a(l)}))}l.keys=function(){return Object.keys(n)},l.id=654,e.exports=l}},[[391,2,3]]]);